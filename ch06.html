<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 6. Virtual Networking</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="Oracle® VM VirtualBox®"><link rel="up" href="index.html" title="Oracle® VM VirtualBox®"><link rel="prev" href="ch05.html" title="Chapter 5. Virtual Storage"><link rel="next" href="ch07.html" title="Chapter 7. Remote Virtual Machines"><style type="text/css"><!--
   body
   {
     font-family:  Verdana, Sans-serif, Arial, 'Trebuchet MS', 'Times New Roman';
     font-size: small;
   }
   h2.title
   {
     font-family: Verdana, Sans-serif, Arial, 'Trebuchet MS', 'Times New Roman';
     margin: 5px 0 0;
     padding: 1px 5px 1px;
     border: 1px solid #6b89d4;
     -moz-border-radius: 0.3em;
     background: #e6edff;
   }
   .titlepage
   {
     text-align: center;
   }
   .refsynopsisdiv, .refsect1, .refsect2, .refsect3
   {
     text-align: left;
   }
   .warning
   {
     padding: 5px;
     border: 1px solid #ff0011;
     -moz-border-radius: 0.3em;
     background: #ffbbbb;
   }
   .warning .title { margin: 0px 0px 5px 0px; }
   .warning p { margin: 1px; }
   .note
   {
     padding: 1px 5px 1px;
     border: 1px solid #84c43b;
     -moz-border-radius: 0.3em;
     background: #d7e9a7;
   }
   .note .title { margin: 0px 0px 5px 0px; }
   .note p { margin: 1px; }
   .cmdsynopsis
   {
     font-family: monospace;
   }
   .refsynopsisdiv        > .cmdsynopsis p, .refsect1        > .cmdsynopsis p,
   .refsynopsisdiv .sect2 > .cmdsynopsis p, .refsect1 .sect2 > .cmdsynopsis p
   {
     margin-top: 0px;
     margin-bottom: 0px;
   }
   .cmdsynopsis p
   {
     padding-left: 3.4em;
     text-indent: -2.2em;
   }
   p.nextcommand
   {
     margin-top:    0px;
     margin-bottom: 0px;
   }
   p.lastcommand
   {
     margin-top:    0px;
   }
   .refentry * h3
   {
     font-size: large;
   }
   .refentry * h4
   {
     font-size: larger;
   }
   .refentry * h5
   {
     font-size: larger;
   }

  --></style></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="networkingdetails"></a>Chapter 6. Virtual Networking</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="ch06.html#nichardware">6.1. Virtual Networking Hardware</a></span></dt><dt><span class="sect1"><a href="ch06.html#networkingmodes">6.2. Introduction to Networking Modes</a></span></dt><dt><span class="sect1"><a href="ch06.html#network_nat">6.3. Network Address Translation (NAT)</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch06.html#natforward">6.3.1. Configuring Port Forwarding with NAT</a></span></dt><dt><span class="sect2"><a href="ch06.html#nat-tftp">6.3.2. PXE Booting with NAT</a></span></dt><dt><span class="sect2"><a href="ch06.html#nat-limitations">6.3.3. NAT Limitations</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch06.html#network_nat_service">6.4. Network Address Translation Service</a></span></dt><dt><span class="sect1"><a href="ch06.html#network_bridged">6.5. Bridged Networking</a></span></dt><dt><span class="sect1"><a href="ch06.html#network_internal">6.6. Internal Networking</a></span></dt><dt><span class="sect1"><a href="ch06.html#network_hostonly">6.7. Host-Only Networking</a></span></dt><dt><span class="sect1"><a href="ch06.html#network_udp_tunnel">6.8. UDP Tunnel Networking</a></span></dt><dt><span class="sect1"><a href="ch06.html#network_vde">6.9. VDE Networking</a></span></dt><dt><span class="sect1"><a href="ch06.html#network_bandwidth_limit">6.10. Limiting Bandwidth for Network Input/Output</a></span></dt><dt><span class="sect1"><a href="ch06.html#network_performance">6.11. Improving Network Performance</a></span></dt></dl></div><p>
    As mentioned in <a href="ch03.html#settings-network" title="3.9. Network Settings">Section 3.9, &#8220;Network Settings&#8221;</a>, Oracle VM VirtualBox
    provides up to eight virtual PCI Ethernet cards for each virtual
    machine. For each such card, you can individually select the
    following:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        The hardware that will be virtualized.
      </p></li><li><p>
        The virtualization mode that the virtual card operates in, with
        respect to your physical networking hardware on the host.
      </p></li></ul></div><p>
    Four of the network cards can be configured in the
    <span class="bold"><strong>Network</strong></span> section of the
    <span class="bold"><strong>Settings</strong></span> dialog in the graphical
    user interface of Oracle VM VirtualBox. You can configure all eight
    network cards on the command line using <span><strong class="command">VBoxManage
    modifyvm</strong></span>. See <a href="ch08.html#vboxmanage-modifyvm" title="8.8. VBoxManage modifyvm">Section 8.8, &#8220;VBoxManage modifyvm&#8221;</a>.
  </p><p>
    This chapter explains the various networking settings in more
    detail.
  </p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="nichardware"></a>6.1. Virtual Networking Hardware</h2></div></div></div><p>
      For each card, you can individually select what kind of
      <span class="emphasis"><em>hardware</em></span> will be presented to the virtual
      machine. Oracle VM VirtualBox can virtualize the following types of
      networking hardware:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          AMD PCNet PCI II (Am79C970A)
        </p></li><li><p>
          AMD PCNet FAST III (Am79C973), the default setting
        </p></li><li><p>
          Intel PRO/1000 MT Desktop (82540EM)
        </p></li><li><p>
          Intel PRO/1000 T Server (82543GC)
        </p></li><li><p>
          Intel PRO/1000 MT Server (82545EM)
        </p></li><li><p>
          Paravirtualized network adapter (virtio-net)
        </p></li></ul></div><p>
      The PCNet FAST III is the default because it is supported by
      nearly all operating systems, as well as by the GNU GRUB boot
      manager. As an exception, the Intel PRO/1000 family adapters are
      chosen for some guest operating system types that no longer ship
      with drivers for the PCNet card, such as Windows Vista.
    </p><p>
      The Intel PRO/1000 MT Desktop type works with Windows Vista and
      later versions. The T Server variant of the Intel PRO/1000 card is
      recognized by Windows XP guests without additional driver
      installation. The MT Server variant facilitates OVF imports from
      other platforms.
    </p><p>
      The Paravirtualized network adapter (virtio-net) is special. If
      you select this adapter, then Oracle VM VirtualBox does
      <span class="emphasis"><em>not</em></span> virtualize common networking hardware
      that is supported by common guest operating systems. Instead,
      Oracle VM VirtualBox expects a special software interface for
      virtualized environments to be provided by the guest, thus
      avoiding the complexity of emulating networking hardware and
      improving network performance. Oracle VM VirtualBox provides support for
      the industry-standard <span class="emphasis"><em>virtio</em></span> networking
      drivers, which are part of the open source KVM project.
    </p><p>
      The virtio networking drivers are available for the following
      guest operating systems:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Linux kernels version 2.6.25 or later can be configured to
          provide virtio support. Some distributions have also
          back-ported virtio to older kernels.
        </p></li><li><p>
          For Windows 2000, XP, and Vista, virtio drivers can be
          downloaded and installed from the KVM project web page:
        </p><p>
          <a href="http://www.linux-kvm.org/page/WindowsGuestDrivers" target="_top">http://www.linux-kvm.org/page/WindowsGuestDrivers</a>.
        </p></li></ul></div><p>
      Oracle VM VirtualBox also has limited support for <span class="emphasis"><em>jumbo
      frames</em></span>. These are networking packets with more than
      1500 bytes of data, provided that you use the Intel card
      virtualization and bridged networking. Jumbo frames are not
      supported with the AMD networking devices. In those cases, jumbo
      packets will silently be dropped for both the transmit and the
      receive direction. Guest operating systems trying to use this
      feature will observe this as a packet loss, which may lead to
      unexpected application behavior in the guest. This does not cause
      problems with guest operating systems in their default
      configuration, as jumbo frames need to be explicitly enabled.
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="networkingmodes"></a>6.2. Introduction to Networking Modes</h2></div></div></div><p>
      Each of the networking adapters can be separately configured to
      operate in one of the following modes:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="bold"><strong>Not attached.</strong></span> In this mode,
          Oracle VM VirtualBox reports to the guest that a network card is
          present, but that there is no connection. This is as if no
          Ethernet cable was plugged into the card. Using this mode, it
          is possible to <span class="emphasis"><em>pull</em></span> the virtual Ethernet
          cable and disrupt the connection, which can be useful to
          inform a guest operating system that no network connection is
          available and enforce a reconfiguration.
        </p></li><li><p>
          <span class="bold"><strong>Network Address Translation
          (NAT)</strong></span>. If all you want is to browse the Web,
          download files, and view email inside the guest, then this
          default mode should be sufficient for you, and you can skip
          the rest of this section. Please note that there are certain
          limitations when using Windows file sharing. See
          <a href="ch06.html#nat-limitations" title="6.3.3. NAT Limitations">Section 6.3.3, &#8220;NAT Limitations&#8221;</a>.
        </p></li><li><p>
          <span class="bold"><strong>NAT Network.</strong></span> A NAT network is
          a type of internal network that allows outbound connections.
          See <a href="ch06.html#network_nat_service" title="6.4. Network Address Translation Service">Section 6.4, &#8220;Network Address Translation Service&#8221;</a>.
        </p></li><li><p>
          <span class="bold"><strong>Bridged networking.</strong></span> This is
          for more advanced networking needs, such as network
          simulations and running servers in a guest. When enabled,
          Oracle VM VirtualBox connects to one of your installed network cards
          and exchanges network packets directly, circumventing your
          host operating system's network stack.
        </p></li><li><p>
          <span class="bold"><strong>Internal networking.</strong></span> This can
          be used to create a different kind of software-based network
          which is visible to selected virtual machines, but not to
          applications running on the host or to the outside world.
        </p></li><li><p>
          <span class="bold"><strong>Host-only networking.</strong></span> This
          can be used to create a network containing the host and a set
          of virtual machines, without the need for the host's physical
          network interface. Instead, a virtual network interface,
          similar to a loopback interface, is created on the host,
          providing connectivity among virtual machines and the host.
        </p></li><li><p>
          <span class="bold"><strong> Generic networking.</strong></span> Rarely
          used modes which share the same generic network interface, by
          allowing the user to select a driver which can be included
          with Oracle VM VirtualBox or be distributed in an extension pack.
        </p><p>
          The following sub-modes are available:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <span class="bold"><strong>UDP Tunnel:</strong></span> Used to
              interconnect virtual machines running on different hosts
              directly, easily, and transparently, over an existing
              network infrastructure.
            </p></li><li><p>
              <span class="bold"><strong>VDE (Virtual Distributed Ethernet)
              networking:</strong></span> Used to connect to a Virtual
              Distributed Ethernet switch on a Linux or a FreeBSD host.
              At the moment this option requires compilation of
              Oracle VM VirtualBox from sources, as the Oracle packages do not
              include it.
            </p></li></ul></div></li></ul></div><p>
      The following table provides an overview of the most important
      networking modes.
    </p><div class="oracle-all"><a name="table-networking-modes"></a><p class="title"><b>Table 6.1. Overview of Networking Modes</b></p><table summary="Overview of Networking Modes" border="1"><colgroup><col align="left"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"></colgroup><thead valign="middle"><tr><th align="left"><span class="bold"><strong>Mode</strong></span></th><th align="center"><p>
                <span class="bold"><strong>VM&#8594;Host</strong></span>
              </p></th><th align="center"><p>
                <span class="bold"><strong>VM&#8592;Host</strong></span>
              </p></th><th align="center"><p>
                <span class="bold"><strong>VM1&#8596;VM2</strong></span>
              </p></th><th align="center"><p>
                <span class="bold"><strong>VM&#8594;Net/LAN</strong></span>
              </p></th><th align="center"><p>
                <span class="bold"><strong>VM&#8592;Net/LAN</strong></span>
              </p></th></tr></thead><tbody valign="middle"><tr><td align="left"><p>
                Host-only
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td><td align="center"><p>
                &#8211;
              </p></td><td align="center"><p>
                &#8211;
              </p></td></tr><tr><td align="left"><p>
                Internal
              </p></td><td align="center"><p>
                &#8211;
              </p></td><td align="center"><p>
                &#8211;
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td><td align="center"><p>
                &#8211;
              </p></td><td align="center"><p>
                &#8211;
              </p></td></tr><tr><td align="left"><p>
                Bridged
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td></tr><tr><td align="left"><p>
                NAT
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td><td align="center"><p>
                <a href="ch06.html#natforward" title="6.3.1. Configuring Port Forwarding with NAT">Port forward</a>
              </p></td><td align="center"><p>
                &#8211;
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td><td align="center"><p>
                <a href="ch06.html#natforward" title="6.3.1. Configuring Port Forwarding with NAT">Port forward</a>
              </p></td></tr><tr><td align="left"><p>
                NATservice
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td><td align="center"><p>
                <a href="ch06.html#network_nat_service" title="6.4. Network Address Translation Service">Port forward</a>
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td><td align="center"><p>
                <span class="bold"><strong>+</strong></span>
              </p></td><td align="center"><p>
                <a href="ch06.html#network_nat_service" title="6.4. Network Address Translation Service">Port forward</a>
              </p></td></tr></tbody></table></div><p>
      The following sections describe the available network modes in
      more detail.
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="network_nat"></a>6.3. Network Address Translation (NAT)</h2></div></div></div><p>
      Network Address Translation (NAT) is the simplest way of accessing
      an external network from a virtual machine. Usually, it does not
      require any configuration on the host network and guest system.
      For this reason, it is the default networking mode in
      Oracle VM VirtualBox.
    </p><p>
      A virtual machine with NAT enabled acts much like a real computer
      that connects to the Internet through a router. The router, in
      this case, is the Oracle VM VirtualBox networking engine, which maps
      traffic from and to the virtual machine transparently. In
      Oracle VM VirtualBox this router is placed between each virtual machine
      and the host. This separation maximizes security since by default
      virtual machines cannot talk to each other.
    </p><p>
      The disadvantage of NAT mode is that, much like a private network
      behind a router, the virtual machine is invisible and unreachable
      from the outside internet. You cannot run a server this way unless
      you set up port forwarding. See <a href="ch06.html#natforward" title="6.3.1. Configuring Port Forwarding with NAT">Section 6.3.1, &#8220;Configuring Port Forwarding with NAT&#8221;</a>.
    </p><p>
      The network frames sent out by the guest operating system are
      received by Oracle VM VirtualBox's NAT engine, which extracts the TCP/IP
      data and resends it using the host operating system. To an
      application on the host, or to another computer on the same
      network as the host, it looks like the data was sent by the
      Oracle VM VirtualBox application on the host, using an IP address
      belonging to the host. Oracle VM VirtualBox listens for replies to the
      packages sent, and repacks and resends them to the guest machine
      on its private network.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Even though the NAT engine separates the VM from the host, the
        VM has access to the host's loopback interface and the network
        services running on it. The host's loopback interface is
        accessible as IP address 10.0.2.2. This access to the host's
        loopback interface can be extremely useful in some cases, for
        example when running a web application under development in the
        VM and the database server on the loopback interface on the
        host.
      </p></div><p>
      The virtual machine receives its network address and configuration
      on the private network from a DHCP server integrated into
      Oracle VM VirtualBox. The IP address thus assigned to the virtual
      machine is usually on a completely different network than the
      host. As more than one card of a virtual machine can be set up to
      use NAT, the first card is connected to the private network
      10.0.2.0, the second card to the network 10.0.3.0 and so on. If
      you need to change the guest-assigned IP range, see
      <a href="ch09.html#changenat" title="9.8. Fine Tuning the Oracle VM VirtualBox NAT Engine">Section 9.8, &#8220;Fine Tuning the Oracle VM VirtualBox NAT Engine&#8221;</a>.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="natforward"></a>6.3.1. Configuring Port Forwarding with NAT</h3></div></div></div><p>
        As the virtual machine is connected to a private network
        internal to Oracle VM VirtualBox and invisible to the host, network
        services on the guest are not accessible to the host machine or
        to other computers on the same network. However, like a physical
        router, Oracle VM VirtualBox can make selected services available to
        the world outside the guest through <span class="emphasis"><em>port
        forwarding</em></span>. This means that Oracle VM VirtualBox listens to
        certain ports on the host and resends all packets which arrive
        there to the guest, on the same or a different port.
      </p><p>
        To an application on the host or other physical or virtual
        machines on the network, it looks as though the service being
        proxied is actually running on the host. This also means that
        you cannot run the same service on the same ports on the host.
        However, you still gain the advantages of running the service in
        a virtual machine. For example, services on the host machine or
        on other virtual machines cannot be compromised or crashed by a
        vulnerability or a bug in the service, and the service can run
        in a different operating system than the host system.
      </p><p>
        To configure port forwarding you can use the graphical
        <span class="bold"><strong>Port Forwarding</strong></span> editor which
        can be found in the <span class="bold"><strong>Network
        Settings</strong></span> dialog for network adaptors configured to
        use NAT. Here, you can map host ports to guest ports to allow
        network traffic to be routed to a specific port in the guest.
      </p><p>
        Alternatively, the command line tool
        <span><strong class="command">VBoxManage</strong></span> can be used. See
        <a href="ch08.html#vboxmanage-modifyvm" title="8.8. VBoxManage modifyvm">Section 8.8, &#8220;VBoxManage modifyvm&#8221;</a>.
      </p><p>
        You will need to know which ports on the guest the service uses
        and to decide which ports to use on the host. You may want to
        use the same ports on the guest and on the host. You can use any
        ports on the host which are not already in use by a service. For
        example, to set up incoming NAT connections to an
        <span><strong class="command">ssh</strong></span> server in the guest, use the following
        command:
      </p><pre class="screen">VBoxManage modifyvm "VM name" --natpf1 "guestssh,tcp,,2222,,22"</pre><p>
        In the above example, all TCP traffic arriving on port 2222 on
        any host interface will be forwarded to port 22 in the guest.
        The protocol name <code class="literal">tcp</code> is a mandatory
        attribute defining which protocol should be used for forwarding,
        <code class="literal">udp</code> could also be used. The name
        <code class="literal">guestssh</code> is purely descriptive and will be
        auto-generated if omitted. The number after
        <code class="option">--natpf</code> denotes the network card, as with other
        <span><strong class="command">VBoxManage</strong></span> commands.
      </p><p>
        To remove this forwarding rule, use the following command:
      </p><pre class="screen">VBoxManage modifyvm "VM name" --natpf1 delete "guestssh"</pre><p>
        If for some reason the guest uses a static assigned IP address
        not leased from the built-in DHCP server, it is required to
        specify the guest IP when registering the forwarding rule, as
        follows:
      </p><pre class="screen">VBoxManage modifyvm "VM name" --natpf1 "guestssh,tcp,,2222,10.0.2.19,22"</pre><p>
        This example is identical to the previous one, except that the
        NAT engine is being told that the guest can be found at the
        10.0.2.19 address.
      </p><p>
        To forward <span class="emphasis"><em>all</em></span> incoming traffic from a
        specific host interface to the guest, specify the IP of that
        host interface as follows:
      </p><pre class="screen">VBoxManage modifyvm "VM name" --natpf1 "guestssh,tcp,127.0.0.1,2222,,22"</pre><p>
        This example forwards all TCP traffic arriving on the localhost
        interface at 127.0.0.1 through port 2222 to port 22 in the
        guest.
      </p><p>
        It is possible to configure incoming NAT connections while the
        VM is running, see <a href="ch08.html#vboxmanage-controlvm" title="8.13. VBoxManage controlvm">Section 8.13, &#8220;VBoxManage controlvm&#8221;</a>.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="nat-tftp"></a>6.3.2. PXE Booting with NAT</h3></div></div></div><p>
        PXE booting is now supported in NAT mode. The NAT DHCP server
        provides a boot file name of the form
        <code class="filename"><em class="replaceable"><code>vmname</code></em>.pxe</code> if
        the directory <code class="literal">TFTP</code> exists in the directory
        where the user's <code class="filename">VirtualBox.xml</code> file is
        kept. It is the responsibility of the user to provide
        <code class="filename"><em class="replaceable"><code>vmname</code></em>.pxe</code>.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="nat-limitations"></a>6.3.3. NAT Limitations</h3></div></div></div><p>
        There are some limitations of NAT mode which users should be
        aware of, as follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <span class="bold"><strong>ICMP protocol limitations.</strong></span>
            Some frequently used network debugging tools, such as
            <span><strong class="command">ping</strong></span> or <span><strong class="command">traceroute</strong></span>,
            rely on the ICMP protocol for sending and receiving
            messages. Oracle VM VirtualBox ICMP support has some limitations,
            meaning <span><strong class="command">ping</strong></span> should work but some other
            tools may not work reliably.
          </p></li><li><p>
            <span class="bold"><strong>Receiving of UDP
            broadcasts.</strong></span> The guest does not reliably receive
            UDP broadcasts. In order to save resources, it only listens
            for a certain amount of time after the guest has sent UDP
            data on a particular port. As a consequence, NetBios name
            resolution based on broadcasts does not always work, but
            WINS always works. As a workaround, you can use the numeric
            IP of the desired server in the
            <code class="filename">\\<em class="replaceable"><code>server</code></em>\<em class="replaceable"><code>share</code></em></code>
            notation.
          </p></li><li><p>
            <span class="bold"><strong>Some protocols are not
            supported.</strong></span> Protocols other than TCP and UDP are
            not supported. GRE is not supported. This means some VPN
            products, such as PPTP from Microsoft, cannot be used. There
            are other VPN products which use only TCP and UDP.
          </p></li><li><p>
            <span class="bold"><strong>Forwarding host ports below
            1024.</strong></span> On UNIX-based hosts, such as Linux, Oracle
            Solaris, and Mac OS X, it is not possible to bind to ports
            below 1024 from applications that are not run by
            <code class="literal">root</code>. As a result, if you try to
            configure such a port forwarding, the VM will refuse to
            start.
          </p></li></ul></div><p>
        These limitations normally do not affect standard network use.
        But the presence of NAT has also subtle effects that may
        interfere with protocols that are normally working. One example
        is NFS, where the server is often configured to refuse
        connections from non-privileged ports, which are those ports not
        below 1024.
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="network_nat_service"></a>6.4. Network Address Translation Service</h2></div></div></div><p>
      The Network Address Translation (NAT) service works in a similar
      way to a home router, grouping the systems using it into a network
      and preventing systems outside of this network from directly
      accessing systems inside it, but letting systems inside
      communicate with each other and with systems outside using TCP and
      UDP over IPv4 and IPv6.
    </p><p>
      A NAT service is attached to an internal network. Virtual machines
      which are to make use of it should be attached to that internal
      network. The name of internal network is chosen when the NAT
      service is created and the internal network will be created if it
      does not already exist. The following is an example command to
      create a NAT network:
    </p><pre class="screen">VBoxManage natnetwork add --netname natnet1 --network "192.168.15.0/24" --enable</pre><p>
      Here, natnet1 is the name of the internal network to be used and
      192.168.15.0/24 is the network address and mask of the NAT service
      interface. By default in this static configuration the gateway
      will be assigned the address 192.168.15.1, the address following
      the interface address, though this is subject to change. To attach
      a DHCP server to the internal network, modify the example command
      as follows:
    </p><pre class="screen">VBoxManage natnetwork add --netname natnet1 --network "192.168.15.0/24" --enable --dhcp on</pre><p>
      To add a DHCP server to an existing network, use the following
      command:
    </p><pre class="screen">VBoxManage natnetwork modify --netname natnet1 --dhcp on</pre><p>
      To disable the DHCP server, use the following command:
    </p><pre class="screen">VBoxManage natnetwork modify --netname natnet1 --dhcp off</pre><p>
      A DHCP server provides a list of registered nameservers, but does
      not map servers from the 127/8 network.
    </p><p>
      To start the NAT service, use the following command:
    </p><pre class="screen">VBoxManage natnetwork start --netname natnet1</pre><p>
      If the network has a DHCP server attached then it will start
      together with the NAT network service.
    </p><p>
      To stop the NAT network service, together with any DHCP server:
    </p><pre class="screen">VBoxManage natnetwork stop --netname natnet1</pre><p>
      To delete the NAT network service:
    </p><pre class="screen">VBoxManage natnetwork remove --netname natnet1</pre><p>
      This command does not remove the DHCP server if one is enabled on
      the internal network.
    </p><p>
      Port-forwarding is supported, using the
      <code class="option">--port-forward-4</code> switch for IPv4 and
      <code class="option">--port-forward-6</code> for IPv6. For example:
    </p><pre class="screen">VBoxManage natnetwork modify \
  --netname natnet1 --port-forward-4 "ssh:tcp:[]:1022:[192.168.15.5]:22"</pre><p>
      This adds a port-forwarding rule from the host's TCP 1022 port to
      the port 22 on the guest with IP address 192.168.15.5. Host port,
      guest port and guest IP are mandatory. To delete the rule, use the
      following command:
    </p><pre class="screen">VBoxManage natnetwork modify --netname natnet1 --port-forward-4 delete ssh</pre><p>
      It is possible to bind a NAT service to specified interface. For
      example:
    </p><pre class="screen">VBoxManage setextradata global "NAT/win-nat-test-0/SourceIp4" 192.168.1.185</pre><p>
      To see the list of registered NAT networks, use the following
      command:
    </p><pre class="screen">VBoxManage list natnetworks</pre><p>
      NAT networks can also be created, deleted, and configured using
      the VirtualBox Manager. Click
      <span class="bold"><strong>File</strong></span>,<span class="bold"><strong>
      Preferences</strong></span> and select the
      <span class="bold"><strong>Network</strong></span> page.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Even though the NAT service separates the VM from the host, the
        VM has access to the host's loopback interface and the network
        services running on it. The host's loopback interface is
        accessible as IP address 10.0.2.2 (assuming the default
        configuration, in other configurations it's the respective
        address in the configured IPv4 or IPv6 network range). This
        access to the host's loopback interface can be extremely useful
        in some cases, for example when running a web application under
        development in the VM and the database server on the loopback
        interface on the host.
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="network_bridged"></a>6.5. Bridged Networking</h2></div></div></div><p>
      With bridged networking, Oracle VM VirtualBox uses a device driver on
      your <span class="emphasis"><em>host</em></span> system that filters data from your
      physical network adapter. This driver is therefore called a
      <span class="emphasis"><em>net filter</em></span> driver. This enables
      Oracle VM VirtualBox to intercept data from the physical network and
      inject data into it, effectively creating a new network interface
      in software. When a guest is using such a new software interface,
      it looks to the host system as though the guest were physically
      connected to the interface using a network cable. The host can
      send data to the guest through that interface and receive data
      from it. This means that you can set up routing or bridging
      between the guest and the rest of your network.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Even though TAP interfaces are no longer necessary on Linux for
        bridged networking, you <span class="emphasis"><em>can</em></span> still use TAP
        interfaces for certain advanced setups, since you can connect a
        VM to any host interface.
      </p></div><p>
      To enable bridged networking, open the
      <span class="bold"><strong>Settings</strong></span> dialog of a virtual
      machine, go to the <span class="bold"><strong>Network</strong></span> page
      and select <span class="bold"><strong>Bridged Network</strong></span> in the
      drop-down list for the <span class="bold"><strong>Attached
      To</strong></span> field. Select a host interface from the list at the
      bottom of the page, which contains the physical network interfaces
      of your systems. On a typical MacBook, for example, this will
      allow you to select between en1: AirPort, which is the wireless
      interface, and en0: Ethernet, which represents the interface with
      a network cable.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Bridging to a wireless interface is done differently from
        bridging to a wired interface, because most wireless adapters do
        not support promiscuous mode. All traffic has to use the MAC
        address of the host's wireless adapter, and therefore
        Oracle VM VirtualBox needs to replace the source MAC address in the
        Ethernet header of an outgoing packet to make sure the reply
        will be sent to the host interface. When Oracle VM VirtualBox sees an
        incoming packet with a destination IP address that belongs to
        one of the virtual machine adapters it replaces the destination
        MAC address in the Ethernet header with the VM adapter's MAC
        address and passes it on. Oracle VM VirtualBox examines ARP and DHCP
        packets in order to learn the IP addresses of virtual machines.
      </p></div><p>
      Depending on your host operating system, the following limitations
      apply:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="bold"><strong>Mac OS X hosts.</strong></span> Functionality
          is limited when using AirPort, the Mac's wireless networking
          system, for bridged networking. Currently, Oracle VM VirtualBox
          supports only IPv4 and IPv6 over AirPort. For other protocols,
          such as IPX, you must choose a wired interface.
        </p></li><li><p>
          <span class="bold"><strong>Linux hosts.</strong></span> Functionality is
          limited when using wireless interfaces for bridged networking.
          Currently, Oracle VM VirtualBox supports only IPv4 and IPv6 over
          wireless. For other protocols, such as IPX, you must choose a
          wired interface.
        </p><p>
          Also, setting the MTU to less than 1500 bytes on wired
          interfaces provided by the sky2 driver on the Marvell Yukon II
          EC Ultra Ethernet NIC is known to cause packet losses under
          certain conditions.
        </p><p>
          Some adapters strip VLAN tags in hardware. This does not allow
          you to use VLAN trunking between VM and the external network
          with pre-2.6.27 Linux kernels, or with host operating systems
          other than Linux.
        </p></li><li><p>
          <span class="bold"><strong>Oracle Solaris hosts.</strong></span> There
          is no support for using wireless interfaces. Filtering guest
          traffic using IPFilter is also not completely supported due to
          technical restrictions of the Oracle Solaris networking
          subsystem. These issues may be addressed in later releases of
          Oracle Solaris 11.
        </p><p>
          On Oracle Solaris 11 hosts build 159 and above, it is possible
          to use Oracle Solaris Crossbow Virtual Network Interfaces
          (VNICs) directly with Oracle VM VirtualBox without any additional
          configuration other than each VNIC must be exclusive for every
          guest network interface.
        </p><p>
          When using VLAN interfaces with Oracle VM VirtualBox, they must be
          named according to the PPA-hack naming scheme, such as
          e1000g513001. Otherwise, the guest may receive packets in an
          unexpected format.
        </p></li></ul></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="network_internal"></a>6.6. Internal Networking</h2></div></div></div><p>
      Internal Networking is similar to bridged networking in that the
      VM can directly communicate with the outside world. However, the
      outside world is limited to other VMs on the same host which
      connect to the same internal network.
    </p><p>
      Even though technically, everything that can be done using
      internal networking can also be done using bridged networking,
      there are security advantages with internal networking. In bridged
      networking mode, all traffic goes through a physical interface of
      the host system. It is therefore possible to attach a packet
      sniffer such as Wireshark to the host interface and log all
      traffic that goes over it. If, for any reason, you prefer two or
      more VMs on the same machine to communicate privately, hiding
      their data from both the host system and the user, bridged
      networking therefore is not an option.
    </p><p>
      Internal networks are created automatically as needed. There is no
      central configuration. Every internal network is identified simply
      by its name. Once there is more than one active virtual network
      card with the same internal network ID, the Oracle VM VirtualBox support
      driver will automatically <span class="emphasis"><em>wire</em></span> the cards and
      act as a network switch. The Oracle VM VirtualBox support driver
      implements a complete Ethernet switch and supports both
      broadcast/multicast frames and promiscuous mode.
    </p><p>
      In order to attach a VM's network card to an internal network, set
      its networking mode to Internal Networking. There are two ways to
      accomplish this:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Use the VM's <span class="bold"><strong>Settings</strong></span> dialog
          in the VirtualBox Manager. In the
          <span class="bold"><strong>Network</strong></span> category of the
          settings dialog, select <span class="bold"><strong>Internal
          Network</strong></span> from the drop-down list of networking
          modes. Select the name of an existing internal network from
          the drop-down list below, or enter a new name into the
          <span class="bold"><strong>Name</strong></span> field.
        </p></li><li><p>
          Use the command line, for example:
        </p><pre class="screen">VBoxManage modifyvm "VM name" --nic&lt;x&gt; intnet</pre><p>
          Optionally, you can specify a network name with the command:
        </p><pre class="screen">VBoxManage modifyvm "VM name" --intnet&lt;x&gt; "network name"</pre><p>
          If you do not specify a network name, the network card will be
          attached to the network <code class="literal">intnet</code> by default.
        </p></li></ul></div><p>
      Unless you configure the virtual network cards in the guest
      operating systems that are participating in the internal network
      to use static IP addresses, you may want to use the DHCP server
      that is built into Oracle VM VirtualBox to manage IP addresses for the
      internal network. See <a href="ch08.html#vboxmanage-dhcpserver" title="8.42. VBoxManage dhcpserver">Section 8.42, &#8220;VBoxManage dhcpserver&#8221;</a>.
    </p><p>
      As a security measure, by default, the Linux implementation of
      internal networking only allows VMs running under the same user ID
      to establish an internal network. However, it is possible to
      create a shared internal networking interface, accessible by users
      with different user IDs.
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="network_hostonly"></a>6.7. Host-Only Networking</h2></div></div></div><p>
      Host-only networking can be thought of as a hybrid between the
      bridged and internal networking modes. As with bridged networking,
      the virtual machines can talk to each other and the host as if
      they were connected through a physical Ethernet switch. As with
      internal networking, a physical networking interface need not be
      present, and the virtual machines cannot talk to the world outside
      the host since they are not connected to a physical networking
      interface.
    </p><p>
      When host-only networking is used, Oracle VM VirtualBox creates a new
      software interface on the host which then appears next to your
      existing network interfaces. In other words, whereas with bridged
      networking an existing physical interface is used to attach
      virtual machines to, with host-only networking a new
      <span class="emphasis"><em>loopback</em></span> interface is created on the host.
      And whereas with internal networking, the traffic between the
      virtual machines cannot be seen, the traffic on the loopback
      interface on the host can be intercepted.
    </p><p>
      Host-only networking is particularly useful for preconfigured
      virtual appliances, where multiple virtual machines are shipped
      together and designed to cooperate. For example, one virtual
      machine may contain a web server and a second one a database, and
      since they are intended to talk to each other, the appliance can
      instruct Oracle VM VirtualBox to set up a host-only network for the two.
      A second, bridged, network would then connect the web server to
      the outside world to serve data to, but the outside world cannot
      connect to the database.
    </p><p>
      To enable a host-only network interface for a virtual machine, do
      either of the following:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Go to the <span class="bold"><strong>Network</strong></span> page in the
          virtual machine's <span class="bold"><strong>Settings</strong></span>
          dialog and select an <span class="bold"><strong>Adapter</strong></span>
          tab. Ensure that the <span class="bold"><strong>Enable Network
          Adapter</strong></span> check box is selected and choose
          <span class="bold"><strong>Host-Only Adapter</strong></span> for the
          <span class="bold"><strong>Attached To</strong></span> field.
        </p></li><li><p>
          On the command line, use <span><strong class="command">VBoxManage modifyvm
          <em class="replaceable"><code>"vmname</code></em>
          --nic<em class="replaceable"><code>x</code></em> hostonly</strong></span>. See
          <a href="ch08.html#vboxmanage-modifyvm" title="8.8. VBoxManage modifyvm">Section 8.8, &#8220;VBoxManage modifyvm&#8221;</a>.
        </p></li></ul></div><p>
      For host-only networking, as with internal networking, you may
      find the DHCP server useful that is built into Oracle VM VirtualBox.
      This is enabled by default and manages the IP addresses in the
      host-only network. Without the DHCP server you would need to
      configure all IP addresses statically.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          In the VirtualBox Manager you can configure the DHCP server by
          choosing <span class="bold"><strong>File</strong></span>,
          <span class="bold"><strong>Host Network Manager</strong></span>. The
          Host Network Manager lists all host-only networks which are
          presently in use. Select the network name and then use the
          <span class="bold"><strong>DHCP Server</strong></span> tab to configure
          DHCP server settings.
        </p></li><li><p>
          Alternatively, you can use the <span><strong class="command">VBoxManage
          dhcpserver</strong></span> command. See
          <a href="ch08.html#vboxmanage-dhcpserver" title="8.42. VBoxManage dhcpserver">Section 8.42, &#8220;VBoxManage dhcpserver&#8221;</a>.
        </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        On Linux and Mac OS X hosts the number of host-only interfaces
        is limited to 128. There is no such limit for Oracle Solaris and
        Windows hosts.
      </p></div><p>
      On Linux, Mac OS X and Solaris Oracle VM VirtualBox will only allow IP
      addresses in 192.168.56.0/21 range to be assigned to host-only
      adapters. For IPv6 only link-local addresses are allowed. If other
      ranges are desired, they can be enabled by creating
      <code class="filename">/etc/vbox/networks.conf</code> and specifying allowed
      ranges there. For example, to allow 10.0.0.0/8 and 192.168.0.0/16
      IPv4 ranges as well as 2001::/64 range put the following lines into
      <code class="filename">/etc/vbox/networks.conf</code>:
      </p><pre class="screen">
      * 10.0.0.0/8 192.168.0.0/16
      * 2001::/64
      </pre><p>
      Lines starting with the hash <span><strong class="command">#</strong></span> are ignored. Next
      example allows any addresses, effectively disabling range control:
      </p><pre class="screen">
      * 0.0.0.0/0 ::/0
      </pre><p>
      If the file exists, but no ranges are specified in it, no addresses
      will be assigned to host-only adapters. The following example
      effectively disables all ranges:
      </p><pre class="screen">
      # No addresses are allowed for host-only adapters
      </pre><p>
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="network_udp_tunnel"></a>6.8. UDP Tunnel Networking</h2></div></div></div><p>
      This networking mode enables you to interconnect virtual machines
      running on different hosts.
    </p><p>
      Technically this is done by encapsulating Ethernet frames sent or
      received by the guest network card into UDP/IP datagrams, and
      sending them over any network available to the host.
    </p><p>
      UDP Tunnel mode has the following parameters:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="bold"><strong>Source UDP port:</strong></span> The port on
          which the host listens. Datagrams arriving on this port from
          any source address will be forwarded to the receiving part of
          the guest network card.
        </p></li><li><p>
          <span class="bold"><strong>Destination address:</strong></span> IP
          address of the target host of the transmitted data.
        </p></li><li><p>
          <span class="bold"><strong>Destination UDP port:</strong></span> Port
          number to which the transmitted data is sent.
        </p></li></ul></div><p>
      When interconnecting two virtual machines on two different hosts,
      their IP addresses must be swapped. On a single host, source and
      destination UDP ports must be swapped.
    </p><p>
      In the following example, host 1 uses the IP address 10.0.0.1 and
      host 2 uses IP address 10.0.0.2. To configure using the
      command-line:
    </p><pre class="screen">        VBoxManage modifyvm "VM 01 on host 1" --nic&lt;x&gt; generic
        VBoxManage modifyvm "VM 01 on host 1" --nicgenericdrv&lt;x&gt; UDPTunnel
        VBoxManage modifyvm "VM 01 on host 1" --nicproperty&lt;x&gt; dest=10.0.0.2
        VBoxManage modifyvm "VM 01 on host 1" --nicproperty&lt;x&gt; sport=10001
        VBoxManage modifyvm "VM 01 on host 1" --nicproperty&lt;x&gt; dport=10002</pre><pre class="screen">        VBoxManage modifyvm "VM 02 on host 2" --nic&lt;y&gt; generic
        VBoxManage modifyvm "VM 02 on host 2" --nicgenericdrv&lt;y&gt; UDPTunnel
        VBoxManage modifyvm "VM 02 on host 2" --nicproperty&lt;y&gt; dest=10.0.0.1
        VBoxManage modifyvm "VM 02 on host 2" --nicproperty&lt;y&gt; sport=10002
        VBoxManage modifyvm "VM 02 on host 2" --nicproperty&lt;y&gt; dport=10001</pre><p>
      Of course, you can always interconnect two virtual machines on the
      same host, by setting the destination address parameter to
      127.0.0.1 on both. It will act similarly to an internal network in
      this case. However, the host can see the network traffic which it
      could not in the normal internal network case.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        On UNIX-based hosts, such as Linux, Oracle Solaris, and Mac OS
        X, it is not possible to bind to ports below 1024 from
        applications that are not run by <code class="literal">root</code>. As a
        result, if you try to configure such a source UDP port, the VM
        will refuse to start.
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="network_vde"></a>6.9. VDE Networking</h2></div></div></div><p>
      Virtual Distributed Ethernet (VDE) is a flexible, virtual network
      infrastructure system, spanning across multiple hosts in a secure
      way. It enables L2/L3 switching, including spanning-tree protocol,
      VLANs, and WAN emulation. It is an optional part of Oracle VM VirtualBox
      which is only included in the source code.
    </p><p>
      VDE is a project developed by Renzo Davoli, Associate Professor at
      the University of Bologna, Italy.
    </p><p>
      The basic building blocks of the infrastructure are VDE switches,
      VDE plugs, and VDE wires which interconnect the switches.
    </p><p>
      The Oracle VM VirtualBox VDE driver has a single parameter: VDE network.
      This is the name of the VDE network switch socket to which the VM
      will be connected.
    </p><p>
      The following basic example shows how to connect a virtual machine
      to a VDE switch.
    </p><div class="orderedlist"><ol type="1"><li><p>
          Create a VDE switch:
        </p><pre class="screen">vde_switch -s /tmp/switch1</pre></li><li><p>
          Configure VMs using the command-line:
        </p><pre class="screen">VBoxManage modifyvm "VM name" --nic&lt;x&gt; generic</pre><pre class="screen">VBoxManage modifyvm "VM name" --nicgenericdrv&lt;x&gt; VDE</pre><p>
          To connect to an automatically allocated switch port:
        </p><pre class="screen">VBoxManage modifyvm "VM name" --nicproperty&lt;x&gt; network=/tmp/switch1</pre><p>
          To connect to a specific switch port
          <em class="replaceable"><code>n</code></em>:
        </p><pre class="screen">VBoxManage modifyvm "VM name" --nicproperty&lt;x&gt; network=/tmp/switch1[&lt;n&gt;]</pre><p>
          This command can be useful for VLANs.
        </p></li><li><p>
          (Optional) Map between a VDE switch port and a VLAN.
        </p><p>
          Using the switch command line:
        </p><pre class="screen">vde$ vlan/create &lt;VLAN&gt;</pre><pre class="screen">vde$ port/setvlan &lt;port&gt; &lt;VLAN&gt;</pre></li></ol></div><p>
      VDE is available on Linux and FreeBSD hosts only. It is only
      available if the VDE software and the VDE plugin library from the
      VirtualSquare project are installed on the host system.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        For Linux hosts, the shared library libvdeplug.so must be
        available in the search path for shared libraries.
      </p></div><p>
      For more information on setting up VDE networks, please see the
      documentation accompanying the software. See also
      <a href="http://wiki.virtualsquare.org" target="_top">http://wiki.virtualsquare.org</a>.
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="network_bandwidth_limit"></a>6.10. Limiting Bandwidth for Network Input/Output</h2></div></div></div><p>
      Oracle VM VirtualBox supports limiting of the maximum bandwidth used for
      network transmission. Several network adapters of one VM may share
      limits through bandwidth groups. It is possible to have more than
      one such limit.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Oracle VM VirtualBox shapes VM traffic only in the transmit direction,
        delaying the packets being sent by virtual machines. It does not
        limit the traffic being received by virtual machines.
      </p></div><p>
      Limits are configured through <span><strong class="command">VBoxManage</strong></span>. The
      following example creates a bandwidth group named Limit, sets the
      limit to 20 Mbps and assigns the group to the first and second
      adapters of the VM:
    </p><pre class="screen">VBoxManage bandwidthctl "VM name" add Limit --type network --limit 20m
VBoxManage modifyvm "VM name" --nicbandwidthgroup1 Limit
VBoxManage modifyvm "VM name" --nicbandwidthgroup2 Limit</pre><p>
      All adapters in a group share the bandwidth limit, meaning that in
      the example above the bandwidth of both adapters combined can
      never exceed 20 Mbps. However, if one adapter does not require
      bandwidth the other can use the remaining bandwidth of its group.
    </p><p>
      The limits for each group can be changed while the VM is running,
      with changes being picked up immediately. The following example
      changes the limit for the group created in the previous example to
      100 Kbps:
    </p><pre class="screen">VBoxManage bandwidthctl "VM name" set Limit --limit 100k</pre><p>
      To completely disable shaping for the first adapter of VM use the
      following command:
    </p><pre class="screen">VBoxManage modifyvm "VM name" --nicbandwidthgroup1 none</pre><p>
      It is also possible to disable shaping for all adapters assigned
      to a bandwidth group while VM is running, by specifying the zero
      limit for the group. For example, for the bandwidth group named
      Limit:
    </p><pre class="screen">VBoxManage bandwidthctl "VM name" set Limit --limit 0</pre></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="network_performance"></a>6.11. Improving Network Performance</h2></div></div></div><p>
      Oracle VM VirtualBox provides a variety of virtual network adapters that
      can be attached to the host's network in a number of ways.
      Depending on which types of adapters and attachments are used the
      network performance will be different. Performance-wise the virtio
      network adapter is preferable over Intel PRO/1000 emulated
      adapters, which are preferred over the PCNet family of adapters.
      Both virtio and Intel PRO/1000 adapters enjoy the benefit of
      segmentation and checksum offloading. Segmentation offloading is
      essential for high performance as it allows for less context
      switches, dramatically increasing the sizes of packets that cross
      the VM/host boundary.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Neither virtio nor Intel PRO/1000 drivers for Windows XP support
        segmentation offloading. Therefore Windows XP guests never reach
        the same transmission rates as other guest types. Refer to MS
        Knowledge base article 842264 for additional information.
      </p></div><p>
      Three attachment types: Internal, Bridged, and Host-Only, have
      nearly identical performance. The Internal type is a little bit
      faster and uses less CPU cycles as the packets never reach the
      host's network stack. The NAT attachment type is the slowest and
      most secure of all attachment types, as it provides network
      address translation. The generic driver attachment is special and
      cannot be considered as an alternative to other attachment types.
    </p><p>
      The number of CPUs assigned to VM does not improve network
      performance and in some cases may hurt it due to increased
      concurrency in the guest.
    </p><p>
      Here is a short summary of things to check in order to improve
      network performance:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Whenever possible use the virtio network adapter. Otherwise,
          use one of the Intel PRO/1000 adapters.
        </p></li><li><p>
          Use a Bridged attachment instead of NAT.
        </p></li><li><p>
          Make sure segmentation offloading is enabled in the guest OS.
          Usually it will be enabled by default. You can check and
          modify offloading settings using the
          <span><strong class="command">ethtool</strong></span> command on Linux guests.
        </p></li><li><p>
          Perform a full detailed analysis of network traffic on the
          VM's network adaptor using a third party tool such as
          Wireshark. To do this, a promiscuous mode policy needs to be
          used on the VM's network adaptor. Use of this mode is only
          possible on the following network types: NAT Network, Bridged
          Adapter, Internal Network, and Host-Only Adapter.
        </p><p>
          To setup a promiscuous mode policy, either select from the
          drop down list located in the <span class="bold"><strong>Network
          Settings</strong></span> dialog for the network adaptor or use the
          command line tool <span><strong class="command">VBoxManage</strong></span>. See
          <a href="ch08.html#vboxmanage-modifyvm" title="8.8. VBoxManage modifyvm">Section 8.8, &#8220;VBoxManage modifyvm&#8221;</a>.
        </p><p>
          Promiscuous mode policies are as follows:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">deny</code>, which hides any traffic not
              intended for the VM's network adaptor. This is the default
              setting.
            </p></li><li><p>
              <code class="literal">allow-vms</code>, which hides all host traffic
              from the VM's network adaptor, but allows it to see
              traffic from and to other VMs.
            </p></li><li><p>
              <code class="literal">allow-all</code>, which removes all
              restrictions. The VM's network adaptor sees all traffic.
            </p></li></ul></div></li></ul></div></div></div></body></html>
