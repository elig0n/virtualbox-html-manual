<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 4. Guest Additions</title><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="Oracle® VM VirtualBox®"><link rel="up" href="index.html" title="Oracle® VM VirtualBox®"><link rel="prev" href="ch03.html" title="Chapter 3. Configuring Virtual Machines"><link rel="next" href="ch05.html" title="Chapter 5. Virtual Storage"><style type="text/css"><!--
   body
   {
     font-family:  Verdana, Sans-serif, Arial, 'Trebuchet MS', 'Times New Roman';
     font-size: small;
   }
   h2.title
   {
     font-family: Verdana, Sans-serif, Arial, 'Trebuchet MS', 'Times New Roman';
     margin: 5px 0 0;
     padding: 1px 5px 1px;
     border: 1px solid #6b89d4;
     -moz-border-radius: 0.3em;
     background: #e6edff;
   }
   .titlepage
   {
     text-align: center;
   }
   .refsynopsisdiv, .refsect1, .refsect2, .refsect3
   {
     text-align: left;
   }
   .warning
   {
     padding: 5px;
     border: 1px solid #ff0011;
     -moz-border-radius: 0.3em;
     background: #ffbbbb;
   }
   .warning .title { margin: 0px 0px 5px 0px; }
   .warning p { margin: 1px; }
   .note
   {
     padding: 1px 5px 1px;
     border: 1px solid #84c43b;
     -moz-border-radius: 0.3em;
     background: #d7e9a7;
   }
   .note .title { margin: 0px 0px 5px 0px; }
   .note p { margin: 1px; }
   .cmdsynopsis
   {
     font-family: monospace;
   }
   .refsynopsisdiv        > .cmdsynopsis p, .refsect1        > .cmdsynopsis p,
   .refsynopsisdiv .sect2 > .cmdsynopsis p, .refsect1 .sect2 > .cmdsynopsis p
   {
     margin-top: 0px;
     margin-bottom: 0px;
   }
   .cmdsynopsis p
   {
     padding-left: 3.4em;
     text-indent: -2.2em;
   }
   p.nextcommand
   {
     margin-top:    0px;
     margin-bottom: 0px;
   }
   p.lastcommand
   {
     margin-top:    0px;
   }
   .refentry * h3
   {
     font-size: large;
   }
   .refentry * h4
   {
     font-size: larger;
   }
   .refentry * h5
   {
     font-size: larger;
   }

  --></style></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="guestadditions"></a>Chapter 4. Guest Additions</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="ch04.html#guestadd-intro">4.1. Introduction to Guest Additions</a></span></dt><dt><span class="sect1"><a href="ch04.html#guestadd-install">4.2. Installing and Maintaining Guest Additions</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#additions-windows">4.2.1. Guest Additions for Windows</a></span></dt><dt><span class="sect2"><a href="ch04.html#additions-linux">4.2.2. Guest Additions for Linux</a></span></dt><dt><span class="sect2"><a href="ch04.html#additions-solaris">4.2.3. Guest Additions for Oracle Solaris</a></span></dt><dt><span class="sect2"><a href="ch04.html#additions-os2">4.2.4. Guest Additions for OS/2</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch04.html#sharedfolders">4.3. Shared Folders</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#sf_mount_manual">4.3.1. Manual Mounting</a></span></dt><dt><span class="sect2"><a href="ch04.html#sf_mount_auto">4.3.2. Automatic Mounting</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch04.html#guestadd-dnd">4.4. Drag and Drop</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#guestadd-dnd-formats">4.4.1. Supported Formats</a></span></dt><dt><span class="sect2"><a href="ch04.html#guestadd-dnd-limitations">4.4.2. Known Limitations</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch04.html#guestadd-video">4.5. Hardware-Accelerated Graphics</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#guestadd-3d">4.5.1. Hardware 3D Acceleration (OpenGL and Direct3D 8/9)</a></span></dt><dt><span class="sect2"><a href="ch04.html#guestadd-2d">4.5.2. Hardware 2D Video Acceleration for Windows Guests</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch04.html#seamlesswindows">4.6. Seamless Windows</a></span></dt><dt><span class="sect1"><a href="ch04.html#guestadd-guestprops">4.7. Guest Properties</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#guestadd-guestprops-waits">4.7.1. Using Guest Properties to Wait on VM Events</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch04.html#guestadd-gc-file-manager">4.8. Guest Control File Manager</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#guestadd-gc-file-manager-using">4.8.1. Using the Guest Control File Manager</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch04.html#guestadd-guestcontrol">4.9. Guest Control of Applications</a></span></dt><dt><span class="sect1"><a href="ch04.html#guestadd-memory-usage">4.10. Memory Overcommitment</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#guestadd-balloon">4.10.1. Memory Ballooning</a></span></dt><dt><span class="sect2"><a href="ch04.html#guestadd-pagefusion">4.10.2. Page Fusion</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch04.html#guestadd-resizing">4.11. Controlling Virtual Monitor Topology</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#guestadd-resizing-linux">4.11.1. X11/Wayland Desktop Environments</a></span></dt></dl></dd></dl></div><p>
    The previous chapter covered getting started with Oracle VM VirtualBox and
    installing operating systems in a virtual machine. For any serious
    and interactive use, the Oracle VM VirtualBox Guest Additions will make
    your life much easier by providing closer integration between host
    and guest and improving the interactive performance of guest
    systems. This chapter describes the Guest Additions in detail.
  </p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="guestadd-intro"></a>4.1. Introduction to Guest Additions</h2></div></div></div><p>
      As mentioned in <a href="ch01.html#virtintro" title="1.2. Some Terminology">Section 1.2, &#8220;Some Terminology&#8221;</a>, the Guest Additions
      are designed to be installed <span class="emphasis"><em>inside</em></span> a virtual
      machine after the guest operating system has been installed. They
      consist of device drivers and system applications that optimize
      the guest operating system for better performance and usability.
      See <a href="ch03.html#guestossupport" title="3.1. Supported Guest Operating Systems">Section 3.1, &#8220;Supported Guest Operating Systems&#8221;</a> for details on what guest
      operating systems are fully supported with Guest Additions by
      Oracle VM VirtualBox.
    </p><p>
      The Oracle VM VirtualBox Guest Additions for all supported guest
      operating systems are provided as a single CD-ROM image file which
      is called <code class="filename">VBoxGuestAdditions.iso</code>. This image
      file is located in the installation directory of Oracle VM VirtualBox.
      To install the Guest Additions for a particular VM, you mount this
      ISO file in your VM as a virtual CD-ROM and install from there.
    </p><p>
      The Guest Additions offer the following features:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="bold"><strong>Mouse pointer integration</strong></span>. To
          overcome the limitations for mouse support described in
          <a href="ch01.html#keyb_mouse_normal" title="1.8.2. Capturing and Releasing Keyboard and Mouse">Section 1.8.2, &#8220;Capturing and Releasing Keyboard and Mouse&#8221;</a>, this feature provides
          you with seamless mouse support. You will only have one mouse
          pointer and pressing the Host key is no longer required to
          <span class="emphasis"><em>free</em></span> the mouse from being captured by the
          guest OS. To make this work, a special mouse driver is
          installed in the guest that communicates with the physical
          mouse driver on your host and moves the guest mouse pointer
          accordingly.
        </p></li><li><p>
          <span class="bold"><strong>Shared folders.</strong></span> These provide
          an easy way to exchange files between the host and the guest.
          Much like ordinary Windows network shares, you can tell
          Oracle VM VirtualBox to treat a certain host directory as a shared
          folder, and Oracle VM VirtualBox will make it available to the guest
          operating system as a network share, irrespective of whether
          the guest actually has a network. See
          <a href="ch04.html#sharedfolders" title="4.3. Shared Folders">Section 4.3, &#8220;Shared Folders&#8221;</a>.
        </p></li><li><p>
          <span class="bold"><strong>Better video support.</strong></span> While
          the virtual graphics card which Oracle VM VirtualBox emulates for
          any guest operating system provides all the basic features,
          the custom video drivers that are installed with the Guest
          Additions provide you with extra high and non-standard video
          modes, as well as accelerated video performance.
        </p><p>
          In addition, with Windows, Linux, and Oracle Solaris guests,
          you can resize the virtual machine's window if the Guest
          Additions are installed. The video resolution in the guest
          will be automatically adjusted, as if you had manually entered
          an arbitrary resolution in the guest's
          <span class="bold"><strong>Display</strong></span> settings. See
          <a href="ch01.html#intro-resize-window" title="1.8.5. Resizing the Machine's Window">Section 1.8.5, &#8220;Resizing the Machine's Window&#8221;</a>.
        </p><p>
          If the Guest Additions are installed, 3D graphics and 2D video
          for guest applications can be accelerated. See
          <a href="ch04.html#guestadd-video" title="4.5. Hardware-Accelerated Graphics">Section 4.5, &#8220;Hardware-Accelerated Graphics&#8221;</a>.
        </p></li><li><p>
          <span class="bold"><strong>Seamless windows.</strong></span> With this
          feature, the individual windows that are displayed on the
          desktop of the virtual machine can be mapped on the host's
          desktop, as if the underlying application was actually running
          on the host. See <a href="ch04.html#seamlesswindows" title="4.6. Seamless Windows">Section 4.6, &#8220;Seamless Windows&#8221;</a>.
        </p></li><li><p>
          <span class="bold"><strong>Generic host/guest communication
          channels.</strong></span> The Guest Additions enable you to control
          and monitor guest execution. The <span class="emphasis"><em>guest
          properties</em></span> provide a generic string-based mechanism
          to exchange data bits between a guest and a host, some of
          which have special meanings for controlling and monitoring the
          guest. See <a href="ch04.html#guestadd-guestprops" title="4.7. Guest Properties">Section 4.7, &#8220;Guest Properties&#8221;</a>.
        </p><p>
          Additionally, applications can be started in a guest from the
          host. See <a href="ch04.html#guestadd-guestcontrol" title="4.9. Guest Control of Applications">Section 4.9, &#8220;Guest Control of Applications&#8221;</a>.
        </p></li><li><p>
          <span class="bold"><strong>Time synchronization.</strong></span> With
          the Guest Additions installed, Oracle VM VirtualBox can ensure that
          the guest's system time is better synchronized with that of
          the host.
        </p><p>
          For various reasons, the time in the guest might run at a
          slightly different rate than the time on the host. The host
          could be receiving updates through NTP and its own time might
          not run linearly. A VM could also be paused, which stops the
          flow of time in the guest for a shorter or longer period of
          time. When the wall clock time between the guest and host only
          differs slightly, the time synchronization service attempts to
          gradually and smoothly adjust the guest time in small
          increments to either catch up or lose time. When the
          difference is too great, for example if a VM paused for hours
          or restored from saved state, the guest time is changed
          immediately, without a gradual adjustment.
        </p><p>
          The Guest Additions will resynchronize the time regularly. See
          <a href="ch09.html#changetimesync" title="9.11.3. Tuning the Guest Additions Time Synchronization Parameters">Section 9.11.3, &#8220;Tuning the Guest Additions Time Synchronization Parameters&#8221;</a> for how to configure the
          parameters of the time synchronization mechanism.
        </p></li><li><p>
          <span class="bold"><strong>Shared clipboard.</strong></span> With the
          Guest Additions installed, the clipboard of the guest
          operating system can optionally be shared with your host
          operating system. See <a href="ch03.html#generalsettings" title="3.4. General Settings">Section 3.4, &#8220;General Settings&#8221;</a>.
        </p></li><li><p>
          <span class="bold"><strong>Automated logins.</strong></span> Also called
          credentials passing. See <a href="ch09.html#autologon" title="9.1. Automated Guest Logins">Section 9.1, &#8220;Automated Guest Logins&#8221;</a>.
        </p></li></ul></div><p>
      Each version of Oracle VM VirtualBox, even minor releases, ship with
      their own version of the Guest Additions. While the interfaces
      through which the Oracle VM VirtualBox core communicates with the Guest
      Additions are kept stable so that Guest Additions already
      installed in a VM should continue to work when Oracle VM VirtualBox is
      upgraded on the host, for best results, it is recommended to keep
      the Guest Additions at the same version.
    </p><p>
      The Windows and Linux Guest Additions therefore check
      automatically whether they have to be updated. If the host is
      running a newer Oracle VM VirtualBox version than the Guest Additions, a
      notification with further instructions is displayed in the guest.
    </p><p>
      To disable this update check for the Guest Additions of a given
      virtual machine, set the value of its
      <code class="literal">/VirtualBox/GuestAdd/CheckHostVersion</code> guest
      property to <code class="literal">0</code>. See
      <a href="ch04.html#guestadd-guestprops" title="4.7. Guest Properties">Section 4.7, &#8220;Guest Properties&#8221;</a>.
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="guestadd-install"></a>4.2. Installing and Maintaining Guest Additions</h2></div></div></div><p>
      Guest Additions are available for virtual machines running
      Windows, Linux, Oracle Solaris, or OS/2. The following sections
      describe the specifics of each variant in detail.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="additions-windows"></a>4.2.1. Guest Additions for Windows</h3></div></div></div><p>
        The Oracle VM VirtualBox Windows Guest Additions are designed to be
        installed in a virtual machine running a Windows operating
        system. The following versions of Windows guests are supported:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Microsoft Windows NT 4.0 (any service pack)
          </p></li><li><p>
            Microsoft Windows 2000 (any service pack)
          </p></li><li><p>
            Microsoft Windows XP (any service pack)
          </p></li><li><p>
            Microsoft Windows Server 2003 (any service pack)
          </p></li><li><p>
            Microsoft Windows Server 2008
          </p></li><li><p>
            Microsoft Windows Vista (all editions)
          </p></li><li><p>
            Microsoft Windows 7 (all editions)
          </p></li><li><p>
            Microsoft Windows 8 (all editions)
          </p></li><li><p>
            Microsoft Windows 10 RTM build 10240
          </p></li><li><p>
            Microsoft Windows Server 2012
          </p></li></ul></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mountingadditionsiso"></a>4.2.1.1. Installing the Windows Guest Additions</h4></div></div></div><p>
          In the <span class="bold"><strong>Devices</strong></span> menu in the
          virtual machine's menu bar, Oracle VM VirtualBox has a menu item
          <span class="bold"><strong>Insert Guest Additions CD
          Image</strong></span>, which mounts the Guest Additions ISO file
          inside your virtual machine. A Windows guest should then
          automatically start the Guest Additions installer, which
          installs the Guest Additions on your Windows guest.
        </p><p>
          For other guest operating systems, or if automatic start of
          software on a CD is disabled, you need to do a manual start of
          the installer.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            For the basic Direct3D acceleration to work in a Windows
            guest, you have to install the WDDM video driver available
            for Windows Vista or later.
          </p><p>
            For Windows 8 and later, only the WDDM Direct3D video driver
            is available. For basic Direct3D acceleration to work in
            Windows XP guests, you have to install the Guest Additions
            in Safe Mode. See <a href="ch14.html" title="Chapter 14. Known Limitations">Chapter 14, <i>Known Limitations</i></a> for
            details.
          </p></div><p>
          If you prefer to mount the Guest Additions manually, you can
          perform the following steps:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Start the virtual machine in which you have installed
              Windows.
            </p></li><li><p>
              Select <span class="bold"><strong>Optical Drives</strong></span>
              from the <span class="bold"><strong>Devices</strong></span> menu in
              the virtual machine's menu bar and then
              <span class="bold"><strong>Choose/Create a Disk
              Image</strong></span>. This displays the Virtual Media Manager,
              described in <a href="ch05.html#vdis" title="5.3. The Virtual Media Manager">Section 5.3, &#8220;The Virtual Media Manager&#8221;</a>.
            </p></li><li><p>
              In the Virtual Media Manager, click
              <span class="bold"><strong>Add</strong></span> and browse your host
              file system for the
              <code class="filename">VBoxGuestAdditions.iso</code> file.
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                  On a Windows host, this file is in the Oracle VM VirtualBox
                  installation directory, usually in
                  <code class="filename">C:\Program
                  files\Oracle\VirtualBox</code>.
                </p></li><li><p>
                  On Mac OS X hosts, this file is in the application
                  bundle of Oracle VM VirtualBox. Right-click on the
                  Oracle VM VirtualBox icon in Finder and choose
                  <span class="bold"><strong>Show Package
                  Contents</strong></span>. The file is located in the
                  <code class="filename">Contents/MacOS</code> folder.
                </p></li><li><p>
                  On a Linux host, this file is in the
                  <code class="filename">additions</code> folder where you
                  installed Oracle VM VirtualBox, usually
                  <code class="filename">/opt/VirtualBox/</code>.
                </p></li><li><p>
                  On Oracle Solaris hosts, this file is in the
                  <code class="filename">additions</code> folder where you
                  installed Oracle VM VirtualBox, usually
                  <code class="filename">/opt/VirtualBox</code>.
                </p></li></ul></div></li><li><p>
              In the Virtual Media Manager, select the ISO file and
              click the <span class="bold"><strong>Add</strong></span> button.
              This mounts the ISO file and presents it to your Windows
              guest as a CD-ROM.
            </p></li></ol></div><p>
          Unless you have the Autostart feature disabled in your Windows
          guest, Windows will now autostart the Oracle VM VirtualBox Guest
          Additions installation program from the Additions ISO. If the
          Autostart feature has been turned off, choose
          <code class="filename">VBoxWindowsAdditions.exe</code> from the CD/DVD
          drive inside the guest to start the installer.
        </p><p>
          The installer will add several device drivers to the Windows
          driver database and then invoke the hardware detection wizard.
        </p><p>
          Depending on your configuration, it might display warnings
          that the drivers are not digitally signed. You must confirm
          these in order to continue the installation and properly
          install the Additions.
        </p><p>
          After installation, reboot your guest operating system to
          activate the Additions.
        </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="additions-windows-updating"></a>4.2.1.2. Updating the Windows Guest Additions</h4></div></div></div><p>
          Windows Guest Additions can be updated by running the
          installation program again. This replaces the previous
          Additions drivers with updated versions.
        </p><p>
          Alternatively, you can also open the Windows Device Manager
          and select <span class="bold"><strong>Update Driver...</strong></span>
          for the following devices:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Oracle VM VirtualBox Graphics Adapter
            </p></li><li><p>
              Oracle VM VirtualBox System Device
            </p></li></ul></div><p>
          For each, choose the option to provide your own driver, click
          <span class="bold"><strong>Have Disk</strong></span> and navigate to the
          CD-ROM drive with the Guest Additions.
        </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="additions-windows-install-unattended"></a>4.2.1.3. Unattended Installation</h4></div></div></div><p>
          To avoid popups when performing an unattended installation of
          the Oracle VM VirtualBox Guest Additions, the code signing
          certificates used to sign the drivers needs to be installed in
          the correct certificate stores on the guest operating system.
          Failure to do this will cause a typical Windows installation
          to display multiple dialogs asking whether you want to install
          a particular driver.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            On some Windows versions, such as Windows 2000 and Windows
            XP, the user intervention popups mentioned above are always
            displayed, even after importing the Oracle certificates.
          </p></div><p>
          Installing the code signing certificates on a Windows guest
          can be done automatically. Use the
          <code class="filename">VBoxCertUtil.exe</code> utility from the
          <code class="filename">cert</code> folder on the Guest Additions
          installation CD.
        </p><p>
          Use the following steps:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Log in as Administrator on the guest.
            </p></li><li><p>
              Mount the Oracle VM VirtualBox Guest Additions .ISO.
            </p></li><li><p>
              Open a command line window on the guest and change to the
              <code class="filename">cert</code> folder on the Oracle VM VirtualBox
              Guest Additions CD.
            </p></li><li><p>
              Run the following command:
            </p><pre class="screen">VBoxCertUtil.exe add-trusted-publisher vbox*.cer --root vbox*.cer</pre><p>
              This command installs the certificates to the certificate
              store. When installing the same certificate more than
              once, an appropriate error will be displayed.
            </p></li></ol></div><p>
          To allow for completely unattended guest installations, you
          can specify a command line parameter to the install launcher:
        </p><pre class="screen">VBoxWindowsAdditions.exe /S</pre><p>
          This automatically installs the right files and drivers for
          the corresponding platform, either 32-bit or 64-bit.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            By default on an unattended installation on a Vista or
            Windows 7 guest, there will be the XPDM graphics driver
            installed. This graphics driver does not support Windows
            Aero / Direct3D on the guest. Instead, the WDDM graphics
            driver needs to be installed. To select this driver by
            default, add the command line parameter
            <code class="literal">/with_wddm</code> when invoking the Windows
            Guest Additions installer. This is only required for Vista
            and Windows 7.
          </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            For Windows Aero to run correctly on a guest, the guest's
            VRAM size needs to be configured to at least 128 MB.
          </p></div><p>
          For more options regarding unattended guest installations,
          consult the command line help by using the command:
        </p><pre class="screen">VBoxWindowsAdditions.exe /?</pre></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="windows-guest-file-extraction"></a>4.2.1.4. Manual File Extraction</h4></div></div></div><p>
          If you would like to install the files and drivers manually,
          you can extract the files from the Windows Guest Additions
          setup as follows:
        </p><pre class="screen">VBoxWindowsAdditions.exe /extract</pre><p>
          To explicitly extract the Windows Guest Additions for another
          platform than the current running one, such as 64-bit files on
          a 32-bit system, you must use the appropriate platform
          installer. Use
          <code class="filename">VBoxWindowsAdditions-x86.exe</code> or
          <code class="filename">VBoxWindowsAdditions-amd64.exe</code> with the
          <code class="literal">/extract</code> parameter.
        </p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="additions-linux"></a>4.2.2. Guest Additions for Linux</h3></div></div></div><p>
        Like the Windows Guest Additions, the Oracle VM VirtualBox Guest
        Additions for Linux are a set of device drivers and system
        applications which may be installed in the guest operating
        system.
      </p><p>
        The following Linux distributions are officially supported:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Oracle Linux as of version 5, including UEK kernels
          </p></li><li><p>
            Fedora as of Fedora Core 4
          </p></li><li><p>
            Red Hat Enterprise Linux as of version 3
          </p></li><li><p>
            SUSE and openSUSE Linux as of version 9
          </p></li><li><p>
            Ubuntu as of version 5.10
          </p></li></ul></div><p>
        Many other distributions are known to work with the Guest
        Additions.
      </p><p>
        The version of the Linux kernel supplied by default in SUSE and
        openSUSE 10.2, Ubuntu 6.10 (all versions) and Ubuntu 6.06
        (server edition) contains a bug which can cause it to crash
        during startup when it is run in a virtual machine. The Guest
        Additions work in those distributions.
      </p><p>
        Note that some Linux distributions already come with all or part
        of the Oracle VM VirtualBox Guest Additions. You may choose to keep
        the distribution's version of the Guest Additions but these are
        often not up to date and limited in functionality, so we
        recommend replacing them with the Guest Additions that come with
        Oracle VM VirtualBox. The Oracle VM VirtualBox Linux Guest Additions
        installer tries to detect an existing installation and replace
        them but depending on how the distribution integrates the Guest
        Additions, this may require some manual interaction. It is
        highly recommended to take a snapshot of the virtual machine
        before replacing preinstalled Guest Additions.
      </p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="additions-linux-install"></a>4.2.2.1. Installing the Linux Guest Additions</h4></div></div></div><p>
          The Oracle VM VirtualBox Guest Additions for Linux are provided on
          the same virtual CD-ROM file as the Guest Additions for
          Windows. See <a href="ch04.html#mountingadditionsiso" title="4.2.1.1. Installing the Windows Guest Additions">Section 4.2.1.1, &#8220;Installing the Windows Guest Additions&#8221;</a>. They also
          come with an installation program that guides you through the
          setup process. However, due to the significant differences
          between Linux distributions, installation may be slightly more
          complex when compared to Windows.
        </p><p>
          Installation generally involves the following steps:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Before installing the Guest Additions, you prepare your
              guest system for building external kernel modules. This
              works as described in
              <a href="ch02.html#externalkernelmodules" title="2.3.2. The Oracle VM VirtualBox Kernel Modules">Section 2.3.2, &#8220;The Oracle VM VirtualBox Kernel Modules&#8221;</a>, except that this
              step must be performed in your Linux
              <span class="emphasis"><em>guest</em></span> instead of on a Linux host
              system.
            </p><p>
              If you suspect that something has gone wrong, check that
              your guest is set up correctly and run the following
              command as root:
            </p><pre class="screen">rcvboxadd setup</pre></li><li><p>
              Insert the <code class="filename">VBoxGuestAdditions.iso</code> CD
              file into your Linux guest's virtual CD-ROM drive, as
              described for a Windows guest in
              <a href="ch04.html#mountingadditionsiso" title="4.2.1.1. Installing the Windows Guest Additions">Section 4.2.1.1, &#8220;Installing the Windows Guest Additions&#8221;</a>.
            </p></li><li><p>
              Change to the directory where your CD-ROM drive is mounted
              and run the following command as root:
            </p><pre class="screen">sh ./VBoxLinuxAdditions.run</pre></li></ol></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="additions-linux-graphics-mouse"></a>4.2.2.2. Graphics and Mouse Integration</h4></div></div></div><p>
          In Linux and Oracle Solaris guests, Oracle VM VirtualBox graphics
          and mouse integration goes through the X Window System.
          Oracle VM VirtualBox can use the X.Org variant of the system, or
          XFree86 version 4.3 which is identical to the first X.Org
          release. During the installation process, the X.Org display
          server will be set up to use the graphics and mouse drivers
          which come with the Guest Additions.
        </p><p>
          After installing the Guest Additions into a fresh installation
          of a supported Linux distribution or Oracle Solaris system,
          many unsupported systems will work correctly too, the guest's
          graphics mode will change to fit the size of the
          Oracle VM VirtualBox window on the host when it is resized. You can
          also ask the guest system to switch to a particular resolution
          by sending a video mode hint using the
          <span><strong class="command">VBoxManage</strong></span> tool.
        </p><p>
          Multiple guest monitors are supported in guests using the
          X.Org server version 1.3, which is part of release 7.3 of the
          X Window System version 11, or a later version. The layout of
          the guest screens can be adjusted as needed using the tools
          which come with the guest operating system.
        </p><p>
          If you want to understand more about the details of how the
          X.Org drivers are set up, in particular if you wish to use
          them in a setting which our installer does not handle
          correctly, see <a href="ch09.html#guestxorgsetup" title="9.3.2. Guest Graphics and Mouse Driver Setup in Depth">Section 9.3.2, &#8220;Guest Graphics and Mouse Driver Setup in Depth&#8221;</a>.
        </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="additions-linux-updating"></a>4.2.2.3. Updating the Linux Guest Additions</h4></div></div></div><p>
          The Guest Additions can simply be updated by going through the
          installation procedure again with an updated CD-ROM image.
          This will replace the drivers with updated versions. You
          should reboot after updating the Guest Additions.
        </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="additions-linux-uninstall"></a>4.2.2.4. Uninstalling the Linux Guest Additions</h4></div></div></div><p>
          If you have a version of the Guest Additions installed on your
          virtual machine and wish to remove it without installing new
          ones, you can do so by inserting the Guest Additions CD image
          into the virtual CD-ROM drive as described above. Then run the
          installer for the current Guest Additions with the
          <code class="literal">uninstall</code> parameter from the path that the
          CD image is mounted on in the guest, as follows:
        </p><pre class="screen">sh ./VBoxLinuxAdditions.run uninstall</pre><p>
          While this will normally work without issues, you may need to
          do some manual cleanup of the guest in some cases, especially
          of the XFree86Config or xorg.conf file. In particular, if the
          Additions version installed or the guest operating system were
          very old, or if you made your own changes to the Guest
          Additions setup after you installed them.
        </p><p>
          You can uninstall the Additions as follows:
        </p><pre class="screen">/opt/VBoxGuestAdditions-<em class="replaceable"><code>version</code></em>/uninstall.sh</pre><p>
          Replace
          <code class="filename">/opt/VBoxGuestAdditions-<em class="replaceable"><code>version</code></em></code>
          with the correct Guest Additions installation directory.
        </p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="additions-solaris"></a>4.2.3. Guest Additions for Oracle Solaris</h3></div></div></div><p>
        Like the Windows Guest Additions, the Oracle VM VirtualBox Guest
        Additions for Oracle Solaris take the form of a set of device
        drivers and system applications which may be installed in the
        guest operating system.
      </p><p>
        The following Oracle Solaris distributions are officially
        supported:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Oracle Solaris 11, including Oracle Solaris 11 Express
          </p></li><li><p>
            Oracle Solaris 10 4/08 and later
          </p></li></ul></div><p>
        Other distributions may work if they are based on comparable
        software releases.
      </p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="additions-solaris-install"></a>4.2.3.1. Installing the Oracle Solaris Guest Additions</h4></div></div></div><p>
          The Oracle VM VirtualBox Guest Additions for Oracle Solaris are
          provided on the same ISO CD-ROM as the Additions for Windows
          and Linux. They come with an installation program that guides
          you through the setup process.
        </p><p>
          Installation involves the following steps:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Mount the <code class="filename">VBoxGuestAdditions.iso</code> file
              as your Oracle Solaris guest's virtual CD-ROM drive,
              exactly the same way as described for a Windows guest in
              <a href="ch04.html#mountingadditionsiso" title="4.2.1.1. Installing the Windows Guest Additions">Section 4.2.1.1, &#8220;Installing the Windows Guest Additions&#8221;</a>.
            </p><p>
              If the CD-ROM drive on the guest does not get mounted, as
              seen with some versions of Oracle Solaris 10, run the
              following command as root:
            </p><pre class="screen">svcadm restart volfs</pre></li><li><p>
              Change to the directory where your CD-ROM drive is mounted
              and run the following command as root:
            </p><pre class="screen">pkgadd -G -d ./VBoxSolarisAdditions.pkg</pre></li><li><p>
              Choose <span class="bold"><strong>1</strong></span> and confirm
              installation of the Guest Additions package. After the
              installation is complete, log out and log in to X server
              on your guest, to activate the X11 Guest Additions.
            </p></li></ol></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="additions-solaris-uninstall"></a>4.2.3.2. Uninstalling the Oracle Solaris Guest Additions</h4></div></div></div><p>
          The Oracle Solaris Guest Additions can be safely removed by
          removing the package from the guest. Open a root terminal
          session and run the following command:
        </p><pre class="screen">pkgrm SUNWvboxguest</pre></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="additions-solaris-updating"></a>4.2.3.3. Updating the Oracle Solaris Guest Additions</h4></div></div></div><p>
          The Guest Additions should be updated by first uninstalling
          the existing Guest Additions and then installing the new ones.
          Attempting to install new Guest Additions without removing the
          existing ones is not possible.
        </p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="additions-os2"></a>4.2.4. Guest Additions for OS/2</h3></div></div></div><p>
        Oracle VM VirtualBox also ships with a set of drivers that improve
        running OS/2 in a virtual machine. Due to restrictions of OS/2
        itself, this variant of the Guest Additions has a limited
        feature set. See <a href="ch14.html" title="Chapter 14. Known Limitations">Chapter 14, <i>Known Limitations</i></a> for details.
      </p><p>
        The OS/2 Guest Additions are provided on the same ISO CD-ROM as
        those for the other platforms. Mount the ISO in OS/2 as
        described previously. The OS/2 Guest Additions are located in
        the directory <code class="filename">\OS2</code>.
      </p><p>
        We do not provide an automatic installer at this time. See the
        <code class="filename">readme.txt</code> file in the CD-ROM directory,
        which describes how to install the OS/2 Guest Additions
        manually.
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sharedfolders"></a>4.3. Shared Folders</h2></div></div></div><p>
      With the <span class="emphasis"><em>shared folders</em></span> feature of
      Oracle VM VirtualBox, you can access files of your host system from
      within the guest system. This is similar to how you would use
      network shares in Windows networks, except that shared folders do
      not require networking, only the Guest Additions. Shared folders
      are supported with Windows 2000 or later, Linux, and Oracle
      Solaris guests. Oracle VM VirtualBox includes experimental support for
      Mac OS X and OS/2 guests.
    </p><p>
      Shared folders physically reside on the <span class="emphasis"><em>host</em></span>
      and are then shared with the guest, which uses a special file
      system driver in the Guest Additions to talk to the host. For
      Windows guests, shared folders are implemented as a pseudo-network
      redirector. For Linux and Oracle Solaris guests, the Guest
      Additions provide a virtual file system.
    </p><p>
      To share a host folder with a virtual machine in Oracle VM VirtualBox,
      you must specify the path of the folder and choose a
      <span class="emphasis"><em>share name</em></span> that the guest can use to access
      the shared folder. This happens on the host. In the guest you can
      then use the share name to connect to it and access files.
    </p><p>
      There are several ways in which shared folders can be set up for a
      virtual machine:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          In the window of a running VM, you select
          <span class="bold"><strong>Shared Folders</strong></span> from the
          <span class="bold"><strong>Devices</strong></span> menu, or click on the
          folder icon on the status bar in the bottom right corner.
        </p></li><li><p>
          If a VM is not currently running, you can configure shared
          folders in the virtual machine's
          <span class="bold"><strong>Settings</strong></span> dialog.
        </p></li><li><p>
          From the command line, you can create shared folders using
          <span><strong class="command">VBoxManage</strong></span>, as follows:
        </p><pre class="screen">VBoxManage sharedfolder add "VM name" --name "sharename" --hostpath "C:\test"</pre><p>
          See <a href="ch08.html#vboxmanage-sharedfolder" title="8.40. VBoxManage sharedfolder">Section 8.40, &#8220;VBoxManage sharedfolder&#8221;</a>.
        </p></li></ul></div><p>
      There are two types of shares:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Permanent shares, that are saved with the VM settings.
        </p></li><li><p>
          Transient shares, that are added at runtime and disappear when
          the VM is powered off. These can be created using a check box
          in the VirtualBox Manager, or by using the
          <code class="option">--transient</code> option of the <span><strong class="command">VBoxManage
          sharedfolder add</strong></span> command.
        </p></li></ul></div><p>
      Shared folders can either be read-write or read-only. This means
      that the guest is either allowed to both read and write, or just
      read files on the host. By default, shared folders are read-write.
      Read-only folders can be created using a check box in the
      VirtualBox Manager, or with the <code class="option">--readonly</code> option
      of the <span><strong class="command">VBoxManage sharedfolder add</strong></span> command.
    </p><p>
      Oracle VM VirtualBox shared folders also support symbolic links, also
      called <span class="emphasis"><em>symlinks</em></span>, under the following
      conditions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The host operating system must support symlinks. For example,
          a Mac OS X, Linux, or Oracle Solaris host is required.
        </p></li><li><p>
          Currently only Linux and Oracle Solaris Guest Additions
          support symlinks.
        </p></li><li><p>
          For security reasons the guest OS is not allowed to create
          symlinks by default. If you trust the guest OS to not abuse
          the functionality, you can enable creation of symlinks for a
          shared folder as follows:
        </p><pre class="screen">VBoxManage setextradata "VM name" VBoxInternal2/SharedFoldersEnableSymlinksCreate/<em class="replaceable"><code>sharename</code></em> 1</pre></li></ul></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="sf_mount_manual"></a>4.3.1. Manual Mounting</h3></div></div></div><p>
        You can mount the shared folder from inside a VM, in the same
        way as you would mount an ordinary network share:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            In a Windows guest, shared folders are browseable and
            therefore visible in Windows Explorer. To attach the host's
            shared folder to your Windows guest, open Windows Explorer
            and look for the folder in <span class="bold"><strong>My
            Networking Places</strong></span>, <span class="bold"><strong>Entire
            Network</strong></span>, <span class="bold"><strong>Oracle VM VirtualBox
            Shared Folders</strong></span>. By right-clicking on a shared
            folder and selecting <span class="bold"><strong>Map Network
            Drive</strong></span> from the menu that pops up, you can assign
            a drive letter to that shared folder.
          </p><p>
            Alternatively, on the Windows command line, use the
            following command:
          </p><pre class="screen">net use x: \\vboxsvr\sharename</pre><p>
            While <code class="literal">vboxsvr</code> is a fixed name, note that
            <code class="literal">vboxsrv</code> would also work, replace
            <em class="replaceable"><code>x:</code></em> with the drive letter that you
            want to use for the share, and
            <em class="replaceable"><code>sharename</code></em> with the share name
            specified with <span><strong class="command">VBoxManage</strong></span>.
          </p></li><li><p>
            In a Linux guest, use the following command:
          </p><pre class="screen">mount -t vboxsf [-o OPTIONS] sharename mountpoint</pre><p>
            To mount a shared folder during boot, add the following
            entry to <code class="filename">/etc/fstab</code>:
          </p><pre class="screen">sharename   mountpoint   vboxsf   defaults  0   0</pre></li><li><p>
            In a Oracle Solaris guest, use the following command:
          </p><pre class="screen">mount -F vboxfs [-o OPTIONS] sharename mountpoint</pre><p>
            Replace <em class="replaceable"><code>sharename</code></em>, use a
            lowercase string, with the share name specified with
            <span><strong class="command">VBoxManage</strong></span> or the VirtualBox Manager.
            Replace <em class="replaceable"><code>mountpoint</code></em> with the path
            where you want the share to be mounted on the guest, such as
            <code class="filename">/mnt/share</code>. The usual mount rules
            apply. For example, create this directory first if it does
            not exist yet.
          </p><p>
            Here is an example of mounting the shared folder for the
            user jack on Oracle Solaris:
          </p><pre class="screen">$ id
uid=5000(jack) gid=1(other)
$ mkdir /export/home/jack/mount
$ pfexec mount -F vboxfs -o uid=5000,gid=1 jackshare /export/home/jack/mount
$ cd ~/mount
$ ls
sharedfile1.mp3 sharedfile2.txt
$</pre><p>
            Beyond the standard options supplied by the
            <span><strong class="command">mount</strong></span> command, the following are
            available:
          </p><pre class="screen">iocharset CHARSET</pre><p>
            This option sets the character set used for I/O operations.
            Note that on Linux guests, if the
            <code class="literal">iocharset</code> option is not specified, then
            the Guest Additions driver will attempt to use the character
            set specified by the CONFIG_NLS_DEFAULT kernel option. If
            this option is not set either, then UTF-8 is used.
          </p><pre class="screen">convertcp CHARSET</pre><p>
            This option specifies the character set used for the shared
            folder name. This is UTF-8 by default.
          </p><p>
            The generic mount options, documented in the
            <span><strong class="command">mount</strong></span> manual page, apply also. Especially
            useful are the options <code class="literal">uid</code>,
            <code class="literal">gid</code> and <code class="literal">mode</code>, as they
            can allow access by normal users in read/write mode,
            depending on the settings, even if root has mounted the
            filesystem.
          </p></li><li><p>
            In an OS/2 guest, use the <span><strong class="command">VBoxControl</strong></span>
            command to manage shared folders. For example:
          </p><pre class="screen">VBoxControl sharedfolder use D: MyShareName
VBoxControl sharedfolder unuse D:
VBoxControl sharedfolder list</pre><p>
            As with Windows guests, shared folders can also be accessed
            via UNC using <code class="filename">\\VBoxSF\</code>,
            <code class="filename">\\VBoxSvr\</code> or
            <code class="filename">\\VBoxSrv\</code> as the server name and the
            shared folder name as <em class="replaceable"><code>sharename</code></em>.
          </p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="sf_mount_auto"></a>4.3.2. Automatic Mounting</h3></div></div></div><p>
        Oracle VM VirtualBox provides the option to mount shared folders
        automatically. When automatic mounting is enabled for a shared
        folder, the Guest Additions service will mount it for you
        automatically. For Windows or OS/2, a preferred drive letter can
        also be specified. For Linux or Oracle Solaris, a mount point
        directory can also be specified.
      </p><p>
        If a drive letter or mount point is not specified, or is in use
        already, an alternative location is found by the Guest Additions
        service. The service searches for an alternative location
        depending on the guest OS, as follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <span class="bold"><strong>Windows and OS/2 guests.</strong></span>
            Search for a free drive letter, starting at
            <code class="filename">Z:</code>. If all drive letters are assigned,
            the folder is not mounted.
          </p></li><li><p>
            <span class="bold"><strong>Linux and Oracle Solaris
            guests.</strong></span> Folders are mounted under the
            <code class="filename">/media</code> directory. The folder name is
            normalized (no spaces, slashes or colons) and is prefixed
            with <code class="filename">sf_</code>.
          </p><p>
            For example, if you have a shared folder called
            <code class="filename">myfiles</code>, it will appear as
            <code class="filename">/media/sf_myfiles</code> in the guest.
          </p><p>
            The guest properties
            <code class="literal">/VirtualBox/GuestAdd/SharedFolders/MountDir</code>
            and the more generic
            <code class="literal">/VirtualBox/GuestAdd/SharedFolders/MountPrefix</code>
            can be used to override the automatic mount directory and
            prefix. See <a href="ch04.html#guestadd-guestprops" title="4.7. Guest Properties">Section 4.7, &#8220;Guest Properties&#8221;</a>.
          </p></li></ul></div><p>
        Access to an automatically mounted shared folder is granted to
        everyone in a Windows guest, including the guest user. For Linux
        and Oracle Solaris guests, access is restricted to members of
        the group <code class="literal">vboxsf</code> and the
        <code class="literal">root</code> user.
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="guestadd-dnd"></a>4.4. Drag and Drop</h2></div></div></div><p>
      Oracle VM VirtualBox enables you to drag and drop content from the host
      to the guest, and vice versa. For this to work the latest version
      of the Guest Additions must be installed on the guest.
    </p><p>
      Drag and drop transparently allows copying or opening files,
      directories, and even certain clipboard formats from one end to
      the other. For example, from the host to the guest or from the
      guest to the host. You then can perform drag and drop operations
      between the host and a VM, as it would be a native drag and drop
      operation on the host OS.
    </p><p>
      At the moment drag and drop is implemented for Windows-based and
      X-Windows-based systems, both on the host and guest side. As
      X-Windows supports many different drag and drop protocols only the
      most common one, XDND, is supported for now. Applications using
      other protocols, such as Motif or OffiX, will not be recognized by
      Oracle VM VirtualBox.
    </p><p>
      In the context of using drag and drop, the origin of the data is
      called the <span class="emphasis"><em>source</em></span>. That is, where the actual
      data comes from and is specified. The
      <span class="emphasis"><em>destination</em></span> specifies where the data from the
      source should go to. Transferring data from the source to the
      destination can be done in various ways, such as copying, moving,
      or linking.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        At the moment only copying of data is supported. Moving or
        linking is not yet implemented.
      </p></div><p>
      When transferring data from the host to the guest OS, the host in
      this case is the source, whereas the guest OS is the destination.
      However, when transferring data from the guest OS to the host, the
      guest OS this time became the source and the host is the
      destination.
    </p><p>
      For security reasons drag and drop can be configured at runtime on
      a per-VM basis either using the <span class="bold"><strong>Drag and
      Drop</strong></span> menu item in the
      <span class="bold"><strong>Devices</strong></span> menu of the virtual
      machine, as shown below, or the <span><strong class="command">VBoxManage</strong></span>
      command.
    </p><div class="figure"><a name="fig-drag-drop-options"></a><p class="title"><b>Figure 4.1. Drag and Drop Menu Options</b></p><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="354"><tr><td align="center"><img src="images/dnd-modes.png" align="middle" width="354" alt="Drag and Drop Menu Options"></td></tr></table></div></div><p>
      The following drag and drop modes are available:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="bold"><strong>Disabled.</strong></span> Disables the drag
          and drop feature entirely. This is the default when creating a
          new VM.
        </p></li><li><p>
          <span class="bold"><strong>Host To Guest.</strong></span> Enables drag
          and drop operations from the host to the guest only.
        </p></li><li><p>
          <span class="bold"><strong>Guest To Host.</strong></span> Enables drag
          and drop operations from the guest to the host only.
        </p></li><li><p>
          <span class="bold"><strong>Bidirectional.</strong></span> Enables drag
          and drop operations in both directions: from the host to the
          guest, and from the guest to the host.
        </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Drag and drop support depends on the frontend being used. At the
        moment, only the VirtualBox Manager frontend provides this
        functionality.
      </p></div><p>
      To use the <span><strong class="command">VBoxManage</strong></span> command to control the
      current drag and drop mode, see <a href="ch08.html" title="Chapter 8. VBoxManage">Chapter 8, <i>VBoxManage</i></a>. The
      <span><strong class="command">modifyvm</strong></span> and <span><strong class="command">controlvm</strong></span>
      commands enable setting of a VM's current drag and drop mode from
      the command line.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="guestadd-dnd-formats"></a>4.4.1. Supported Formats</h3></div></div></div><p>
        As Oracle VM VirtualBox can run on a variety of host operating systems
        and also supports a wide range of guests, certain data formats
        must be translated after transfer. This is so that the
        destination operating system, which receives the data, is able
        to handle them in an appropriate manner.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          When dragging files no data conversion is done in any way. For
          example, when transferring a file from a Linux guest to a
          Windows host the Linux-specific line endings are not converted
          to Windows line endings.
        </p></div><p>
        The following formats are handled by the Oracle VM VirtualBox drag and
        drop service:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <span class="bold"><strong>Plain text:</strong></span> From
            applications such as text editors, internet browsers and
            terminal windows.
          </p></li><li><p>
            <span class="bold"><strong>Files:</strong></span> From file managers
            such as Windows Explorer, Nautilus, and Finder.
          </p></li><li><p>
            <span class="bold"><strong>Directories:</strong></span> For
            directories, the same formats apply as for files.
          </p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="guestadd-dnd-limitations"></a>4.4.2. Known Limitations</h3></div></div></div><p>
        The following limitations are known for drag and drop:
      </p><p>
        On Windows hosts, dragging and dropping content between
        UAC-elevated (User Account Control) programs and
        non-UAC-elevated programs is not allowed. If you start
        Oracle VM VirtualBox with Administrator privileges then drag and drop
        will not work with Windows Explorer, which runs with regular
        user privileges by default.
      </p><p>
        On Linux hosts and guests, programs can query for drag and drop
        data while the drag operation is still in progress. For example,
        on LXDE using the PCManFM file manager. This currently is not
        supported. As a workaround, a different file manager, such as
        Nautilus, can be used instead.
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="guestadd-video"></a>4.5. Hardware-Accelerated Graphics</h2></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="guestadd-3d"></a>4.5.1. Hardware 3D Acceleration (OpenGL and Direct3D 8/9)</h3></div></div></div><p>
        The Oracle VM VirtualBox Guest Additions contain experimental hardware
        3D support for Windows, Linux, and Oracle Solaris guests.
      </p><p>
        With this feature, if an application inside your virtual machine
        uses 3D features through the OpenGL or Direct3D 8/9 programming
        interfaces, instead of emulating them in software, which would
        be slow, Oracle VM VirtualBox will attempt to use your host's 3D
        hardware. This works for all supported host platforms, provided
        that your host operating system can make use of your accelerated
        3D hardware in the first place.
      </p><p>
        The 3D acceleration feature currently has the following
        preconditions:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            It is only available for certain Windows, Linux, and Oracle
            Solaris guests. In particular:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                3D acceleration with Windows guests requires Windows
                2000 or later. Apart from on Windows 2000 guests, both
                OpenGL and Direct3D 8/9 are supported on an experimental
                basis.
              </p></li><li><p>
                OpenGL on Linux requires kernel 2.6.27 or later, as well
                as X.org server version 1.5 or later. Ubuntu 10.10 and
                Fedora 14 have been tested and confirmed as working.
              </p></li><li><p>
                OpenGL on Oracle Solaris guests requires X.org server
                version 1.5 or later.
              </p></li></ul></div></li><li><p>
            The Guest Additions must be installed.
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
              For the basic Direct3D acceleration to work in a Windows
              Guest, Oracle VM VirtualBox needs to replace Windows system
              files in the virtual machine. As a result, the Guest
              Additions installation program offers Direct3D
              acceleration as an option that must be explicitly enabled.
              Also, you must install the Guest Additions in Safe Mode.
              This does <span class="emphasis"><em>not</em></span> apply to the WDDM
              Direct3D video driver available for Windows Vista and
              later. See <a href="ch14.html" title="Chapter 14. Known Limitations">Chapter 14, <i>Known Limitations</i></a> for details.
            </p></div></li><li><p>
            Because 3D support is still experimental at this time, it is
            disabled by default and must be <span class="emphasis"><em>manually
            enabled</em></span> in the VM settings. See
            <a href="ch03.html#settings-display" title="3.6. Display Settings">Section 3.6, &#8220;Display Settings&#8221;</a>.
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
              Untrusted guest systems should not be allowed to use the
              3D acceleration features of Oracle VM VirtualBox, just as
              untrusted host software should not be allowed to use 3D
              acceleration. Drivers for 3D hardware are generally too
              complex to be made properly secure and any software which
              is allowed to access them may be able to compromise the
              operating system running them. In addition, enabling 3D
              acceleration gives the guest direct access to a large body
              of additional program code in the Oracle VM VirtualBox host
              process which it might conceivably be able to use to crash
              the virtual machine.
            </p></div></li></ul></div><p>
        To enable Aero theme support, the Oracle VM VirtualBox WDDM video
        driver must be installed, which is available with the Guest
        Additions installation. The WDDM driver is not installed by
        default for Vista and Windows 7 guests and must be
        <span class="emphasis"><em>manually selected</em></span> in the Guest Additions
        installer by clicking <span class="bold"><strong>No</strong></span> in the
        <span class="bold"><strong>Would You Like to Install Basic Direct3D
        Support</strong></span> dialog displayed when the Direct3D feature is
        selected.
      </p><p>
        The Aero theme is not enabled by default on Windows. See your
        Windows platform documentation for details of how to enable the
        Aero theme.
      </p><p>
        Technically, Oracle VM VirtualBox implements 3D acceleration by
        installing an additional hardware 3D driver inside the guest
        when the Guest Additions are installed. This driver acts as a
        hardware 3D driver and reports to the guest operating system
        that the virtual hardware is capable of 3D hardware
        acceleration. When an application in the guest then requests
        hardware acceleration through the OpenGL or Direct3D programming
        interfaces, these are sent to the host through a special
        communication tunnel implemented by Oracle VM VirtualBox. The
        <span class="emphasis"><em>host</em></span> then performs the requested 3D
        operation using the host's programming interfaces.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="guestadd-2d"></a>4.5.2. Hardware 2D Video Acceleration for Windows Guests</h3></div></div></div><p>
        The Oracle VM VirtualBox Guest Additions contain experimental hardware
        2D video acceleration support for Windows guests.
      </p><p>
        With this feature, if an application such as a video player
        inside your Windows VM uses 2D video overlays to play a movie
        clip, then Oracle VM VirtualBox will attempt to use your host's video
        acceleration hardware instead of performing overlay stretching
        and color conversion in software, which would be slow. This
        currently works for Windows, Linux and Mac OS X host platforms,
        provided that your host operating system can make use of 2D
        video acceleration in the first place.
      </p><p>
        Hardware 2D video acceleration currently has the following
        preconditions:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Only available for Windows guests, running Windows XP or
            later.
          </p></li><li><p>
            Guest Additions must be installed.
          </p></li><li><p>
            Because 2D support is still experimental at this time, it is
            disabled by default and must be <span class="emphasis"><em>manually
            enabled</em></span> in the VM settings. See
            <a href="ch03.html#settings-display" title="3.6. Display Settings">Section 3.6, &#8220;Display Settings&#8221;</a>.
          </p></li></ul></div><p>
        Technically, Oracle VM VirtualBox implements this by exposing video
        overlay DirectDraw capabilities in the Guest Additions video
        driver. The driver sends all overlay commands to the host
        through a special communication tunnel implemented by
        Oracle VM VirtualBox. On the host side, OpenGL is then used to
        implement color space transformation and scaling.
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="seamlesswindows"></a>4.6. Seamless Windows</h2></div></div></div><p>
      With the <span class="emphasis"><em>seamless windows</em></span> feature of
      Oracle VM VirtualBox, you can have the windows that are displayed within
      a virtual machine appear side by side next to the windows of your
      host. This feature is supported for the following guest operating
      systems, provided that the Guest Additions are installed:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Windows guests.
        </p></li><li><p>
          Supported Linux or Oracle Solaris guests running the X Window
          System.
        </p></li></ul></div><p>
      After seamless windows are enabled, Oracle VM VirtualBox suppresses the
      display of the desktop background of your guest, allowing you to
      run the windows of your guest operating system seamlessly next to
      the windows of your host.
    </p><div class="figure"><a name="fig-seamless-windows"></a><p class="title"><b>Figure 4.2. Seamless Windows on a Host Desktop</b></p><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="496"><tr><td align="center"><img src="images/seamless.png" align="middle" width="496" alt="Seamless Windows on a Host Desktop"></td></tr></table></div></div><p>
      To enable seamless mode, after starting the virtual machine, press
      the <span class="bold"><strong>Host key + L</strong></span>. The Host key is
      normally the right control key. This will enlarge the size of the
      VM's display to the size of your host screen and mask out the
      guest operating system's background. To disable seamless windows
      and go back to the normal VM display, press the Host key + L
      again.
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="guestadd-guestprops"></a>4.7. Guest Properties</h2></div></div></div><p>
      Oracle VM VirtualBox enables requests of some properties from a running
      guest, provided that the Oracle VM VirtualBox Guest Additions are
      installed and the VM is running. This provides the following
      advantages:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          A number of predefined VM characteristics are automatically
          maintained by Oracle VM VirtualBox and can be retrieved on the host.
          For example, to monitor VM performance and statistics.
        </p></li><li><p>
          Arbitrary string data can be exchanged between guest and host.
          This works in both directions.
        </p></li></ul></div><p>
      To accomplish this, Oracle VM VirtualBox establishes a private
      communication channel between the Oracle VM VirtualBox Guest Additions
      and the host, and software on both sides can use this channel to
      exchange string data for arbitrary purposes. Guest properties are
      simply string keys to which a value is attached. They can be set,
      or written to, by either the host and the guest. They can also be
      read from both sides.
    </p><p>
      In addition to establishing the general mechanism of reading and
      writing values, a set of predefined guest properties is
      automatically maintained by the Oracle VM VirtualBox Guest Additions to
      allow for retrieving interesting guest data such as the guest's
      exact operating system and service pack level, the installed
      version of the Guest Additions, users that are currently logged
      into the guest OS, network statistics and more. These predefined
      properties are all prefixed with <code class="literal">/VirtualBox/</code>
      and organized into a hierarchical tree of keys.
    </p><p>
      Some of this runtime information is shown when you select
      <span class="bold"><strong>Session Information Dialog</strong></span> from a
      virtual machine's <span class="bold"><strong>Machine</strong></span> menu.
    </p><p>
      A more flexible way to use this channel is with the
      <span><strong class="command">VBoxManage guestproperty</strong></span> command. See
      <a href="ch08.html#vboxmanage-guestproperty" title="8.31. VBoxManage guestproperty">Section 8.31, &#8220;VBoxManage guestproperty&#8221;</a>. For example, to have
      <span class="emphasis"><em>all</em></span> the available guest properties for a
      given running VM listed with their respective values, use this
      command:
    </p><pre class="screen">$ VBoxManage guestproperty enumerate "Windows Vista III"
VirtualBox Command Line Management Interface Version <em class="replaceable"><code>version-number</code></em>
(C) 2005-2019 Oracle Corporation
All rights reserved.

Name: /VirtualBox/GuestInfo/OS/Product, value: Windows Vista Business Edition,
    timestamp: 1229098278843087000, flags:
Name: /VirtualBox/GuestInfo/OS/Release, value: 6.0.6001,
    timestamp: 1229098278950553000, flags:
Name: /VirtualBox/GuestInfo/OS/ServicePack, value: 1,
    timestamp: 1229098279122627000, flags:
Name: /VirtualBox/GuestAdd/InstallDir,
    value: C:/Program Files/Oracle/VirtualBox
    Guest Additions, timestamp: 1229098279269739000, flags:
Name: /VirtualBox/GuestAdd/Revision, value: 40720,
    timestamp: 1229098279345664000, flags:
Name: /VirtualBox/GuestAdd/Version, value: <em class="replaceable"><code>version-number</code></em>,
    timestamp: 1229098279479515000, flags:
Name: /VirtualBox/GuestAdd/Components/VBoxControl.exe, value: <em class="replaceable"><code>version-number</code></em>r40720,
    timestamp: 1229098279651731000, flags:
Name: /VirtualBox/GuestAdd/Components/VBoxHook.dll, value: <em class="replaceable"><code>version-number</code></em>r40720,
    timestamp: 1229098279804835000, flags:
Name: /VirtualBox/GuestAdd/Components/VBoxDisp.dll, value: <em class="replaceable"><code>version-number</code></em>r40720,
    timestamp: 1229098279880611000, flags:
Name: /VirtualBox/GuestAdd/Components/VBoxMRXNP.dll, value: <em class="replaceable"><code>version-number</code></em>r40720,
    timestamp: 1229098279882618000, flags:
Name: /VirtualBox/GuestAdd/Components/VBoxService.exe, value: <em class="replaceable"><code>version-number</code></em>r40720,
    timestamp: 1229098279883195000, flags:
Name: /VirtualBox/GuestAdd/Components/VBoxTray.exe, value: <em class="replaceable"><code>version-number</code></em>r40720,
    timestamp: 1229098279885027000, flags:
Name: /VirtualBox/GuestAdd/Components/VBoxGuest.sys, value: <em class="replaceable"><code>version-number</code></em>r40720,
    timestamp: 1229098279886838000, flags:
Name: /VirtualBox/GuestAdd/Components/VBoxMouse.sys, value: <em class="replaceable"><code>version-number</code></em>r40720,
    timestamp: 1229098279890600000, flags:
Name: /VirtualBox/GuestAdd/Components/VBoxSF.sys, value: <em class="replaceable"><code>version-number</code></em>r40720,
    timestamp: 1229098279893056000, flags:
Name: /VirtualBox/GuestAdd/Components/VBoxVideo.sys, value: <em class="replaceable"><code>version-number</code></em>r40720,
    timestamp: 1229098279895767000, flags:
Name: /VirtualBox/GuestInfo/OS/LoggedInUsers, value: 1,
    timestamp: 1229099826317660000, flags:
Name: /VirtualBox/GuestInfo/OS/NoLoggedInUsers, value: false,
    timestamp: 1229098455580553000, flags:
Name: /VirtualBox/GuestInfo/Net/Count, value: 1,
    timestamp: 1229099826299785000, flags:
Name: /VirtualBox/HostInfo/GUI/LanguageID, value: C,
    timestamp: 1229098151272771000, flags:
Name: /VirtualBox/GuestInfo/Net/0/V4/IP, value: 192.168.2.102,
    timestamp: 1229099826300088000, flags:
Name: /VirtualBox/GuestInfo/Net/0/V4/Broadcast, value: 255.255.255.255,
    timestamp: 1229099826300220000, flags:
Name: /VirtualBox/GuestInfo/Net/0/V4/Netmask, value: 255.255.255.0,
    timestamp: 1229099826300350000, flags:
Name: /VirtualBox/GuestInfo/Net/0/Status, value: Up,
    timestamp: 1229099826300524000, flags:
Name: /VirtualBox/GuestInfo/OS/LoggedInUsersList, value: username,
    timestamp: 1229099826317386000, flags:</pre><p>
      To query the value of a single property, use the
      <span><strong class="command">get</strong></span> subcommand as follows:
    </p><pre class="screen">$ VBoxManage guestproperty get "Windows Vista III" "/VirtualBox/GuestInfo/OS/Product"
VirtualBox Command Line Management Interface Version <em class="replaceable"><code>version-number</code></em>
(C) 2005-2019 Oracle Corporation
All rights reserved.

Value: Windows Vista Business Edition</pre><p>
      To add or change guest properties from the guest, use the tool
      <span><strong class="command">VBoxControl</strong></span>. This tool is included in the Guest
      Additions. When started from a Linux guest, this tool requires
      root privileges for security reasons.
    </p><pre class="screen">$ sudo VBoxControl guestproperty enumerate
VirtualBox Guest Additions Command Line Management Interface Version <em class="replaceable"><code>version-number</code></em>
(C) 2005-2019 Oracle Corporation
All rights reserved.

Name: /VirtualBox/GuestInfo/OS/Release, value: 2.6.28-18-generic,
    timestamp: 1265813265835667000, flags: &lt;NULL&gt;
Name: /VirtualBox/GuestInfo/OS/Version, value: #59-Ubuntu SMP Thu Jan 28 01:23:03 UTC 2010,
    timestamp: 1265813265836305000, flags: &lt;NULL&gt;
      ...</pre><p>
      For more complex needs, you can use the Oracle VM VirtualBox programming
      interfaces. See <a href="ch11.html" title="Chapter 11. Oracle VM VirtualBox Programming Interfaces">Chapter 11, <i>Oracle VM VirtualBox Programming Interfaces</i></a>.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="guestadd-guestprops-waits"></a>4.7.1. Using Guest Properties to Wait on VM Events</h3></div></div></div><p>
        The properties <code class="literal">/VirtualBox/HostInfo/VBoxVer</code>,
        <code class="literal">/VirtualBox/HostInfo/VBoxVerExt</code> or
        <code class="literal">/VirtualBox/HostInfo/VBoxRev</code> can be waited on
        to detect that the VM state was restored from saved state or
        snapshot:
      </p><pre class="screen">$ VBoxControl guestproperty wait /VirtualBox/HostInfo/VBoxVer</pre><p>
        Similarly the
        <code class="literal">/VirtualBox/HostInfo/ResumeCounter</code> can be
        used to detect that a VM was resumed from the paused state or
        saved state.
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="guestadd-gc-file-manager"></a>4.8. Guest Control File Manager</h2></div></div></div><p>
      The Guest Control File Manager is a feature of the Guest Additions
      that enables easy copying and moving of files between a guest and
      the host system. Other file management operations provide support
      to create new folders and to rename or delete files.
    </p><div class="figure"><a name="fig-guest-control-fm"></a><p class="title"><b>Figure 4.3. Guest Control File Manager</b></p><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="425"><tr><td align="center"><img src="images/guest-fm.png" align="middle" width="425" alt="Guest Control File Manager"></td></tr></table></div></div><p>
      The Guest Control File Manager works by mounting the host file
      system. Guest users must authenticate and create a guest session
      before they can transfer files.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="guestadd-gc-file-manager-using"></a>4.8.1. Using the Guest Control File Manager</h3></div></div></div><p>
        The following steps describe how to use the Guest Control File
        Manager.
      </p><div class="orderedlist"><ol type="1"><li><p>
            Open the Guest Control File Manager.
          </p><p>
            In the guest VM, select
            <span class="bold"><strong>Machine</strong></span>,
            <span class="bold"><strong>File Manager</strong></span>.
          </p><p>
            The left pane shows the files on the host system.
          </p></li><li><p>
            Create a guest session.
          </p><p>
            At the bottom of the Guest Control File Manager, enter
            authentication credentials for a user on the guest system.
          </p><p>
            Click <span class="bold"><strong>Create Session</strong></span>.
          </p><p>
            The contents of the guest VM file system appears in the
            right pane of the Guest Control File Manager.
          </p></li><li><p>
            Transfer files between the guest and the host system by
            using the move and copy file transfer icons.
          </p><p>
            You can copy and move files from a guest to the host system
            or from the host system to the guest.
          </p></li><li><p>
            Close the Guest Control File Manager.
          </p><p>
            Click <span class="bold"><strong>Close</strong></span> to end the
            guest session.
          </p></li></ol></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="guestadd-guestcontrol"></a>4.9. Guest Control of Applications</h2></div></div></div><p>
      The Guest Additions enable starting of applications inside a guest
      VM from the host system. This feature can be used to automate
      deployment of software within the guest.
    </p><p>
      For this to work, the application needs to be installed on the
      guest. No additional software needs to be installed on the host.
      Additionally, text mode output to stdout and stderr can be shown
      on the host for further processing. There are options to specify
      user credentials and a timeout value, in milliseconds, to limit
      the time the application is able to run.
    </p><p>
      The Guest Additions for Windows allow for automatic updating. This
      applies for already installed Guest Additions versions. Also,
      copying files from host to the guest as well as remotely creating
      guest directories is available.
    </p><p>
      To use these features, use the Oracle VM VirtualBox command line. See
      <a href="ch08.html#vboxmanage-guestcontrol" title="8.32. VBoxManage guestcontrol">Section 8.32, &#8220;VBoxManage guestcontrol&#8221;</a>.
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="guestadd-memory-usage"></a>4.10. Memory Overcommitment</h2></div></div></div><p>
      In server environments with many VMs, the Guest Additions can be
      used to share physical host memory between several VMs. This
      reduces the total amount of memory in use by the VMs. If memory
      usage is the limiting factor and CPU resources are still
      available, this can help with running more VMs on each host.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="guestadd-balloon"></a>4.10.1. Memory Ballooning</h3></div></div></div><p>
        The Guest Additions can change the amount of host memory that a
        VM uses, while the machine is running. Because of how this is
        implemented, this feature is called <span class="emphasis"><em>memory
        ballooning</em></span>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><div class="itemizedlist"><ul type="disc"><li><p>
              Oracle VM VirtualBox supports memory ballooning only on 64-bit
              hosts. It is not supported on Mac OS X hosts.
            </p></li><li><p>
              Memory ballooning does not work with large pages enabled.
              To turn off large pages support for a VM, run
              <span><strong class="command">VBoxManage modifyvm
              <em class="replaceable"><code>vmname</code></em> --largepages
              off</strong></span>
            </p></li></ul></div></div><p>
        Normally, to change the amount of memory allocated to a virtual
        machine, you have to shut down the virtual machine entirely and
        modify its settings. With memory ballooning, memory that was
        allocated for a virtual machine can be given to another virtual
        machine without having to shut the machine down.
      </p><p>
        When memory ballooning is requested, the Oracle VM VirtualBox Guest
        Additions, which run inside the guest, allocate physical memory
        from the guest operating system on the kernel level and lock
        this memory down in the guest. This ensures that the guest will
        not use that memory any longer. No guest applications can
        allocate it, and the guest kernel will not use it either.
        Oracle VM VirtualBox can then reuse this memory and give it to another
        virtual machine.
      </p><p>
        The memory made available through the ballooning mechanism is
        only available for reuse by Oracle VM VirtualBox. It is
        <span class="emphasis"><em>not</em></span> returned as free memory to the host.
        Requesting balloon memory from a running guest will therefore
        not increase the amount of free, unallocated memory on the host.
        Effectively, memory ballooning is therefore a memory
        overcommitment mechanism for multiple virtual machines while
        they are running. This can be useful to temporarily start
        another machine, or in more complicated environments, for
        sophisticated memory management of many virtual machines that
        may be running in parallel depending on how memory is used by
        the guests.
      </p><p>
        At this time, memory ballooning is only supported through
        <span><strong class="command">VBoxManage</strong></span>. Use the following command to
        increase or decrease the size of the memory balloon within a
        running virtual machine that has Guest Additions installed:
      </p><pre class="screen">VBoxManage controlvm "VM name" guestmemoryballoon n</pre><p>
        where <em class="replaceable"><code>VM name</code></em> is the name or UUID of
        the virtual machine in question and <em class="replaceable"><code>n</code></em>
        is the amount of memory to allocate from the guest in megabytes.
        See <a href="ch08.html#vboxmanage-controlvm" title="8.13. VBoxManage controlvm">Section 8.13, &#8220;VBoxManage controlvm&#8221;</a>.
      </p><p>
        You can also set a default balloon that will automatically be
        requested from the VM every time after it has started up with
        the following command:
      </p><pre class="screen">VBoxManage modifyvm "VM name" --guestmemoryballoon n</pre><p>
        By default, no balloon memory is allocated. This is a VM
        setting, like other <span><strong class="command">modifyvm</strong></span> settings, and
        therefore can only be set while the machine is shut down. See
        <a href="ch08.html#vboxmanage-modifyvm" title="8.8. VBoxManage modifyvm">Section 8.8, &#8220;VBoxManage modifyvm&#8221;</a>.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="guestadd-pagefusion"></a>4.10.2. Page Fusion</h3></div></div></div><p>
        Whereas memory ballooning simply reduces the amount of RAM that
        is available to a VM, Page Fusion works differently. It avoids
        memory duplication between several similar running VMs.
      </p><p>
        In a server environment running several similar VMs on the same
        host, lots of memory pages are identical. For example, if the
        VMs are using identical operating systems. Oracle VM VirtualBox's Page
        Fusion technology can efficiently identify these identical
        memory pages and share them between multiple VMs.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Oracle VM VirtualBox supports Page Fusion only on 64-bit hosts, and
          it is not supported on Mac OS X hosts. Page Fusion currently
          works only with Windows 2000 and later guests.
        </p></div><p>
        The more similar the VMs on a given host are, the more
        efficiently Page Fusion can reduce the amount of host memory
        that is in use. It therefore works best if all VMs on a host run
        identical operating systems. Instead of having a complete copy
        of each operating system in each VM, Page Fusion identifies the
        identical memory pages in use by these operating systems and
        eliminates the duplicates, sharing host memory between several
        machines. This is called <span class="emphasis"><em>deduplication</em></span>. If
        a VM tries to modify a page that has been shared with other VMs,
        a new page is allocated again for that VM with a copy of the
        shared page. This is called <span class="emphasis"><em>copy on write</em></span>.
        All this is fully transparent to the virtual machine.
      </p><p>
        You may be familiar with this kind of memory overcommitment from
        other hypervisor products, which call this feature
        <span class="emphasis"><em>page sharing</em></span> or <span class="emphasis"><em>same page
        merging</em></span>. However, Page Fusion differs significantly
        from those other solutions, whose approaches have several
        drawbacks:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Traditional hypervisors scan <span class="emphasis"><em>all</em></span> guest
            memory and compute checksums, also called hashes, for every
            single memory page. Then, they look for pages with identical
            hashes and compare the entire content of those pages. If two
            pages produce the same hash, it is very likely that the
            pages are identical in content. This process can take rather
            long, especially if the system is not idling. As a result,
            the additional memory only becomes available after a
            significant amount of time, such as hours or sometimes days.
            Even worse, this kind of page sharing algorithm generally
            consumes significant CPU resources and increases the
            virtualization overhead by 10 to 20%.
          </p><p>
            Page Fusion in Oracle VM VirtualBox uses logic in the
            Oracle VM VirtualBox Guest Additions to quickly identify memory
            cells that are most likely identical across VMs. It can
            therefore achieve most of the possible savings of page
            sharing almost immediately and with almost no overhead.
          </p></li><li><p>
            Page Fusion is also much less likely to be confused by
            identical memory that it will eliminate, just to learn
            seconds later that the memory will now change and having to
            perform a highly expensive and often service-disrupting
            reallocation.
          </p></li></ul></div><p>
        At this time, Page Fusion can only be controlled with
        <span><strong class="command">VBoxManage</strong></span>, and only while a VM is shut down.
        To enable Page Fusion for a VM, use the following command:
      </p><pre class="screen">VBoxManage modifyvm "VM name" --pagefusion on</pre><p>
        You can observe Page Fusion operation using some metrics.
        <code class="literal">RAM/VMM/Shared</code> shows the total amount of
        fused pages, whereas the per-VM metric
        <code class="literal">Guest/RAM/Usage/Shared</code> will return the amount
        of fused memory for a given VM. See
        <a href="ch08.html#vboxmanage-metrics" title="8.33. VBoxManage metrics">Section 8.33, &#8220;VBoxManage metrics&#8221;</a> for information on how to
        query metrics.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Enabling Page Fusion might indirectly increase the chances for
          malicious guests to successfully attack other VMs running on
          the same host. See <a href="ch13.html#pot-insecure" title="13.3.4. Potentially Insecure Operations">Section 13.3.4, &#8220;Potentially Insecure Operations&#8221;</a>.
        </p></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="guestadd-resizing"></a>4.11. Controlling Virtual Monitor Topology</h2></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="guestadd-resizing-linux"></a>4.11.1. X11/Wayland Desktop Environments</h3></div></div></div><p>
        The Guest Additions provide services for controlling the guest
        system's monitor topology. Monitor topology means the resolution
        of each virtual monitor and its state (disabled/enabled). The
        resolution of a virtual monitor can be modified from the host
        side either by resizing the window that hosts the virtual monitor,
        through the view menu or through
        <code class="code">VBoxManage controlvm "vmname" setscreenlayout</code>.
        On guest operating systems with X11/Wayland desktops this is
        put into effect by either of two following services:
      </p><pre class="screen">
        VBoxClient --vmsvga
        VBoxDRMClient
      </pre><p>
        Here are some details about guest screen resolution control
        functionality:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            On X11/Wayland desktops the resizing service is started during
            desktop session initialization, that is desktop login. On X11
            desktops <code class="code">VBoxClient --vmsvga</code> handles screen
            topology through the RandR extension.
            On Wayland clients <code class="code">VBoxDRMClient</code> is used. The
            decision is made automatically at each desktop session start.
          </p></li><li><p>
            On 32 bit guest operating systems <code class="code">VBoxDRMClient</code>
            is always used, in order to work around bugs.
          </p></li><li><p>
            Since the mentioned monitor topology control services are
            initialized during the desktop session start, it is impossible
            to control the monitor resolution of display managers such as
            gdm, lightdm. This default behavior can be changed by setting
            the guest property <code class="code">/VirtualBox/GuestAdd/DRMResize</code>
            of the virtual machine to any value. Please refer to
            <a href="ch04.html#guestadd-guestprops" title="4.7. Guest Properties">Section 4.7, &#8220;Guest Properties&#8221;</a> for updating guest
            properties. When this guest property is set then
            <code class="code">VBoxDRMClient</code> is started during the guest OS boot
            and stays active all the time, for both ithe display manager
            login screen and the desktop session.
          </p></li></ul></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="guestadd-resizing-linux-limitations"></a>4.11.1.1. Known Limitations</h4></div></div></div><p>
          <code class="code">VBoxDRMClient</code> is not able to handle arbitrary guest
          monitor topologies. Specifically, disabling a guest monitor
          (except the last one) invalidates the monitor topology due to
          limitations in the Linux kernel module <code class="code">vmwgfx.ko</code>.
          iFor example, when the guest is configured to have 4 monitors
          it is not recommended to disable the 2nd or 3rd monitor.
        </p></div></div></div></div></body></html>
